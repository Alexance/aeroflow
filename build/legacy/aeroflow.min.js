!function(n,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var r={exports:{}};t(r,r.exports),n.aeroflow=r.exports}}(this,function(n,t){"use strict";function r(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function e(n){return function(t,r,u){for(var e=-1;++e<n.length&&t(n[e]););r()}}function i(){return function(n,t){return t()}}function o(n){return function(t,r,u){try{return t(n(u.data)),r()}catch(e){return r(e)}}}function c(n){return function(t,r,u){return n.then(function(n){t(n),r()},r)}}function a(n){return function(t,r){t(n),r()}}function f(n){ht(n)&&n()}function l(n){return arguments.length?ht(n)?function(t,r,u){var e=!1,i=void 0;try{i=n(function(n){return e?!1:t(n)?!0:(e=!0,void r())},function(n){e||(e=!0,r(n))},u)}catch(o){if(e)throw f(i),o;e=!0,r()}f(i)}:a(n):i()}function s(n,t){var r=ht(n)?n:ct(n);return function(n,u,e){for(var i=0,o=t;n(r(o,i++,e.data)););u()}}function v(n,t){return function(r,u){for(;r(n+t*tt()););u()}}function h(n,t){return function(r,u){for(;r(nt(n+t*tt())););u()}}function d(n,t){return t=mt(t,1),n=mt(n,0),t-=n,dt(n)&&dt(t)?h(n,t):v(n,t)}function w(n,t,r){return t=mt(t,ut),n=mt(n,0),n===t?a(n):t>n?(r=mt(r,1),1>r?a(n):function(u,e,i){for(var o=n;u(o)&&(o+=r)<=t;);e()}):(r=mt(r,-1),r>-1?a(n):function(u,e,i){for(var o=n;u(o)&&(o+=r)>=t;);e()})}function b(n){return function(t,r,u){var e=0;try{for(;t(n(e++,u.data)););r()}catch(i){r(i)}}}function m(n){return function(t,r,u){for(;t(n););r()}}function p(n){return isFunction(n)?b(n):m(n)}function g(n){return n=+n,isNaN(n)?i():function(t,r,u){var e=setInterval(function(){t(new Date)||(clearInterval(e),r())},n)}}function y(n){return function(t){return function(r,u,e){var i=!0,o=1,c=void 0;t(function(t){return i?(i=!1,c=t):c=n(c,t,o++,e.data),!0},function(n){return wt(n)&&!i&&r(c),u(n)},e)}}}function x(n,t){return function(r){return function(u,e,i){var o=0,c=t;r(function(t){return c=n(c,t,o++,i.data),!0},function(n){return wt(n)&&u(c),e(n)},i)}}}function k(n,t){return function(r){return function(u,e,i){var o=!0,c=0,a=t;r(function(t){return o=!1,a=n(a,t,c++,i.data),!0},function(n){return wt(n)&&!o&&u(a),e(n)},i)}}}function A(n,t,r){var u=arguments.length;if(!u||!ht(n))return function(){return i()};switch(u){case 1:return y(n);case 2:return x(n,t);default:return ht(n)?r?k(n,t):x(n,t):function(){return a(n)}}}function j(n){return(n?k:x)(function(n){return n+1},0)}function N(n){return function(t){return function(r,u,e){var i=$n(),o=0;t(function(t){var u=n(t,o++,e.data),c=void 0;return vt(u)?(c=u,u-=$n()):c=$n()+u,c>i&&(i=c+1),setTimeout(function(){return r(t)},rt(u,0)),!0},function(n){return i-=$n(),setTimeout(function(){return u(n)},rt(i,0)),!0},e)}}}function S(n){return function(t){return function(r,u,e){return t(function(t){return setTimeout(function(){return r(t)},n)},function(t){return setTimeout(function(){return u(t)},n)},e)}}}function M(n){switch(lt(n)){case Hn:return N(function(){return rt(n-new Date,0)});case Jn:return N(n);default:return S(rt(+n||0,0))}}function T(n){return function(t){return function(r,u,e){return t(function(t){return console.log(n+"next",t),r(t)},function(t){return t?console.error(n+"done",t):console.log(n+"done"),u(t)},e)}}}function O(n,t){return function(r){return function(u,e,i){return r(function(r){return t(n+"next",r),u(r)},function(r){return r?t(n+"done",r):t(n+"done"),e(r)},i)}}}function E(n,t){return ht(n)?O("",n):ht(t)?O(n,t):T(wt(n)?"":n)}function I(n){var t=void 0;switch(lt(n)){case Jn:t=n;break;case Wn:t=function(t){return n.test(t)};break;case Zn:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=!0,o=!0;e=e.spawn(),n(function(n){return i=!1,t(n)?!0:o=!1},function(n){return wt(n)&&r(o&&!i),u(n)},e)}}}function D(n){var t=void 0;switch(lt(n)){case Jn:t=n;break;case Wn:t=function(t){return n.test(t)};break;case Zn:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=0;n(function(n){return!t(n,i++,e.data)||r(n)},u,e)}}}function P(n,t){var r=ht(n)?n:ct(wt(n)?",":n);return(t?k:x)(function(n,t,u,e){return n.length?n+r(t,u,e)+t:t},"")}function _(n){if(wt(n))return at;var t=ht(n)?n:ct(n);return function(n){return function(r,u,e){var i=0;n(function(n){return r(t(n,i++,e.data))},u,e)}}}function F(){return y(function(n,t){return t>n?t:n})}function R(){return function(n){return function(t,r,u){var e=[];n(function(n){return e.push(n),!0},function(n){return wt(n)&&t(e),r(n)},u)}}}function B(){return function(n){return function(t,r,u){return R()(n)(function(n){n.length&&(n.sort(),t(n[nt(n.length/2)]))},r,u)}}}function C(){return y(function(n,t){return n>t?t:n})}function G(){return function(n){return function(t,r,u){return R()(n)(function(n){for(var r=n.length;r--;)t(n[r]);return!1},r,u)}}}function U(){return function(n){return function(t,r,u){return n(ft,r,u)}}}function X(n){return function(t){return function(r,u,e){var i=-1;t(function(t){return++i<n||r(t)},u,e)}}}function q(n){return function(t){return function(r,u,e){return R()(t)(function(t){for(var e=rt(t.length-n,0),i=-1;++i<e&&r(t[i]););u()},u,e)}}}function z(n){return function(t){return function(r,u,e){var i=0,o=!0;t(function(t){return o&&!n(t,i++,e.data)&&(o=!1),o||r(t)},u,e)}}}function H(n){switch(lt(n)){case Ln:return n>0?X(n):0>n?q(-n):at;case Jn:return z(n);default:return n?U():at}}function J(n){var t=void 0;switch(lt(n)){case Jn:t=n;break;case Wn:t=function(t){return n.test(t)};break;case Zn:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=!1;e=e.spawn(),n(function(n){return t(n)?(i=!0,!1):!0},function(n){return wt(n)&&r(i),u(n)},e)}}}function K(){return function(n){return x(function(n,t){return n+t},0)}}function L(n){return function(t){return function(r,u,e){var i=-1;t(function(t){return++i<n&&r(t)},u,e)}}}function Q(n){return function(t){return function(r,u,e){return R()(t)(function(t){for(var e=t.length,i=rt(e-n-1,0);++i<e&&r(t[i]););u()},u,e)}}}function V(n){return function(t){return function(r,u,e){var i=0;t(function(t){return n(t,i++,e.data)&&r(t)},u,e)}}}function W(n){switch(lt(n)){case Ln:return n>0?L(n):0>n?Q(-n):i();case Jn:return V(n);default:return n?at:i()}}function Y(n){return function(t){return ht(n)?function(r,u,e){var i=0;t(function(t){return n(t,i++,e.data),r(t)},u,e)}:t}}function Z(){return function(n){return function(t,r,u){var e=$n();n(function(n){var r=$n(),u=t({timedelta:r-e,timestamp:$n,value:n});return e=r,u},r,u)}}}function $(n,t){var r=wt(n)?at:ht(n)?n:ct(n),u=wt(t)?at:ht(t)?t:ct(t);return function(n){return function(t,e,i){var o=0,c=new Map;n(function(n){return c.set(r(n,o++,i.data),u(n,o++,i.data)),!0},function(n){return wt(n)&&t(c),e(n)},i)}}}function nn(){return function(n){return function(t,r,u){var e=new Set;n(function(n){return e.add(n),!0},function(n){return wt(n)&&t(e),r(n)},u)}}}function tn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new pt(this.emitter,this.sources.concat(t))}function rn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new pt(this.emitter,t)}function un(n){return new pt(n(this.emitter),this.sources)}function en(n){return this.chain(j(n))}function on(n){return this.chain(M(n))}function cn(n,t){return this.chain(E(n,t))}function an(n){return this.chain(I(n))}function fn(n){return this.chain(D(n))}function ln(n,t){return this.chain(P(n,t))}function sn(n){return this.chain(_(n))}function vn(){return this.chain(F())}function hn(){return this.chain(B())}function dn(){return this.chain(C())}function wn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new pt(this.emitter,t.concat(this.sources))}function bn(n,t,r){return this.chain(A(n,t,r))}function mn(){return this.chain(G())}function pn(n,t,r){ht(t)||(t=ft),ht(n)||(n=ft);var u=it({},{data:{value:r},flow:{value:this}});return setImmediate(function(){u.flow.emitter(function(t){return!1!==n(t,r)},function(n){return t(n,r)},u)}),this}function gn(n){return this.chain(H(n))}function yn(n){return this.chain(J(n))}function xn(){return this.chain(K())}function kn(n){return this.chain(W(n))}function An(n){return this.chain(Y(n))}function jn(){return this.chain(Z())}function Nn(){return this.chain(R())}function Sn(n,t){return this.chain($(n,t))}function Mn(){return this.chain(nn())}function Tn(n){if(wt(n))return a(n);var t=lt(n);if(t===Un)return n.emitter;var r=yt[t];if(ht(r))return r(n);switch(t){case qn:case Ln:case Yn:return a(n);default:var u=n[Kn];return ht(u)?function(n,t,r){for(var e=u();r.active;){var i=e.next();if(i.done)break;n(i.value)}t()}:a(n)}}function On(n,t,r){var u=r.flow.sources,e=u.length,i=-1;!function o(c){wt(c)&&++i<e?Tn(u[i])(n,o,r):t(c)}()}function En(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new pt(On,t)}function In(n){return new pt(l(n))}function Dn(n,t){return new pt(s(n,t))}function Pn(n){return new pt(a(n))}function _n(n,t){return new pt(d(n,t))}function Fn(n,t,r){return new pt(w(n,t,r))}function Rn(n){return new pt(p(n))}function Bn(n){return new pt(g(n))}Object.defineProperty(t,"__esModule",{value:!0});var Cn,Gn,Un="Aeroflow",Xn="Array",qn="Boolean",zn=Symbol.toStringTag,Hn="Date",Jn="Function",Kn=Symbol.iterator,Ln="Number",Qn="Promise",Vn="prototype",Wn="RegExp",Yn="Symbol",Zn="Undefined",$n=Date.now,nt=Math.floor,tt=Math.random,rt=Math.max,ut=Number.MAX_SAFE_INTEGER,et=Object.create,it=Object.defineProperties,ot=Object.prototype.toString,ct=function(n){return function(){return n}},at=function(n){return n},ft=function(){},lt=function(n){return ot.call(n).slice(8,-1)},st=function(n){return function(t){return lt(t)===n}},vt=st(Hn),ht=st(Jn),dt=Number.isInteger,wt=function(n){return null==n},bt=st(Ln),mt=function(n,t){return!bt(n)&&(n=+n,isNaN(n))?t:n},pt=function xt(n,t){u(this,xt),it(this,{emitter:{value:n},sources:{value:t}})},gt=et(Object[Vn],{count:{value:en,writable:!0},delay:{value:on,writable:!0},dump:{value:cn,writable:!0},every:{value:an,writable:!0},filter:{value:fn,writable:!0},join:{value:ln,writable:!0},map:{value:sn,writable:!0},max:{value:vn,writable:!0},mean:{value:hn,writable:!0},min:{value:dn,writable:!0},reduce:{value:bn,writable:!0},reverse:{value:mn,writable:!0},skip:{value:gn,writable:!0},some:{value:yn,writable:!0},sum:{value:xn,writable:!0},take:{value:kn,writable:!0},tap:{value:An,writable:!0},timestamp:{value:jn,writable:!0},toArray:{value:Nn,writable:!0},toMap:{value:Sn,writable:!0},toSet:{value:Mn,writable:!0}});pt[Vn]=et(gt,(Cn={},r(Cn,zn,{value:Un}),r(Cn,"append",{value:tn}),r(Cn,"bind",{value:rn}),r(Cn,"chain",{value:un}),r(Cn,"prepend",{value:wn}),r(Cn,"run",{value:pn}),Cn));var yt=et(null,(Gn={},r(Gn,Xn,{value:e,writable:!0}),r(Gn,qn,{value:a,writable:!0}),r(Gn,Hn,{value:a,writable:!0}),r(Gn,Jn,{value:o,writable:!0}),r(Gn,Ln,{value:a,writable:!0}),r(Gn,Qn,{value:c,writable:!0}),r(Gn,Wn,{value:a,writable:!0}),Gn));it(En,{adapters:{get:function(){return yt}},create:{value:In},empty:{enumerable:!0,value:new pt(i())},expand:{value:Dn},just:{value:Pn},operators:{get:function(){return gt}},random:{value:_n},range:{value:Fn},repeat:{value:Rn},timer:{value:Bn}}),t["default"]=En,n.exports=t["default"]});