!function(n,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var r={exports:{}};t(r,r.exports),n.aeroflow=r.exports}}(this,function(n,t){"use strict";function r(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function e(n){return function(t,r,u){for(var e=-1;++e<n.length&&t(n[e]););r()}}function i(){return function(n,t){return t()}}function o(n){return function(t,r,u){try{return t(n(u.data)),r()}catch(e){return r(e)}}}function c(n){return function(t,r,u){return n.then(function(n){t(n),r()},r)}}function a(n){return function(t,r){t(n),r()}}function f(n){vt(n)&&n()}function l(n){return arguments.length?vt(n)?function(t,r,u){var e=!1,i=void 0;try{i=n(function(n){return e?!1:t(n)?!0:(e=!0,void r())},function(n){e||(e=!0,r(n))},u)}catch(o){if(e)throw f(i),o;e=!0,r()}f(i)}:a(n):i()}function s(n,t){var r=vt(n)?n:ct(n);return function(n,u,e){for(var i=0,o=t;n(r(o,i++,e.data)););u()}}function v(n,t){return function(r,u){for(;r(n+t*tt()););u()}}function h(n,t){return function(r,u){for(;r(nt(n+t*tt())););u()}}function d(n,t){return t=bt(t,1),n=bt(n,0),t-=n,ht(n)&&ht(t)?h(n,t):v(n,t)}function w(n,t,r){return t=bt(t,ut),n=bt(n,0),n===t?a(n):t>n?(r=bt(r,1),1>r?a(n):function(u,e,i){for(var o=n;u(o)&&(o+=r)<=t;);e()}):(r=bt(r,-1),r>-1?a(n):function(u,e,i){for(var o=n;u(o)&&(o+=r)>=t;);e()})}function b(n){return function(t,r,u){var e=0;try{for(;t(n(e++,u.data)););r()}catch(i){r(i)}}}function m(n){return function(t,r,u){for(;t(n););r()}}function p(n){return isFunction(n)?b(n):m(n)}function g(n){return n=+n,isNaN(n)?i():function(t,r,u){var e=setInterval(function(){t(new Date)||(clearInterval(e),r())},n)}}function y(n){return function(t){return function(r,u,e){var i=!0,o=1,c=void 0;t(function(t){return i?(i=!1,c=t):c=n(c,t,o++,e.data),!0},function(n){return dt(n)&&!i&&r(c),u(n)},e)}}}function k(n,t){return function(r){return function(u,e,i){var o=0,c=t;r(function(t){return c=n(c,t,o++,i.data),!0},function(n){return dt(n)&&u(c),e(n)},i)}}}function x(n,t){return function(r){return function(u,e,i){var o=!0,c=0,a=t;r(function(t){return o=!1,a=n(a,t,c++,i.data),!0},function(n){return dt(n)&&!o&&u(a),e(n)},i)}}}function A(n,t,r){var u=arguments.length;if(!u||!vt(n))return function(){return i()};switch(u){case 1:return y(n);case 2:return k(n,t);default:return vt(n)?r?x(n,t):k(n,t):function(){return a(n)}}}function M(n){return(n?x:k)(function(n){return n+1},0)}function j(n){var t=vt(n)?n:ct(n);return function(n){return function(r,u,e){function i(n,r){if(a)return void o.push([n,r]);a=!0;var u=t(r,f++,e.data);switch(lt(u)){case Hn:u-=$n();break;case Ln:break;default:u=+u}0>u&&(u=0),setTimeout(function(){a=!1,n(r)?o.length&&i.apply(null,o.shift()):(c=!0,o.length=0)},u)}var o=[],c=!1,a=!1,f=0;return n(function(n){return c?!1:(i(r,n),!0)},function(n){c=!0,i(u,n)},e)}}}function N(n){return function(t){return function(r,u,e){return t(function(t){return console.log(n+"next",t),r(t)},function(t){return t?console.error(n+"done",t):console.log(n+"done"),u(t)},e)}}}function S(n,t){return function(r){return function(u,e,i){return r(function(r){return t(n+"next",r),u(r)},function(r){return r?t(n+"done",r):t(n+"done"),e(r)},i)}}}function O(n,t){return vt(n)?S("",n):vt(t)?S(n,t):N(dt(n)?"":n)}function E(n){var t=void 0;switch(lt(n)){case Jn:t=n;break;case Wn:t=function(t){return n.test(t)};break;case Zn:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=!0,o=!0;e=e.spawn(),n(function(n){return i=!1,t(n)?!0:o=!1},function(n){return dt(n)&&r(o&&!i),u(n)},e)}}}function I(n){var t=void 0;switch(lt(n)){case Jn:t=n;break;case Wn:t=function(t){return n.test(t)};break;case Zn:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=0;n(function(n){return!t(n,i++,e.data)||r(n)},u,e)}}}function P(n){n=n.length?n.map(function(n){return vt(n)?n:ct(n)}):[ct()];var t=n.length-1;return function(r){return function(u,e,i){var o=new Map,c=0;r(function(r){for(var u=void 0,e=o,a=-1;++a<=t;){var f=n[a](r,c++,i.data);u=e.get(f),u||(u=a===t?[]:new Map,e.set(f,u)),e=u}return u.push(r),!0},function(n){n?e(n):(Array.from(o).every(u),e())},i)}}}function T(n,t){var r=vt(n)?n:ct(dt(n)?",":n);return(t?x:k)(function(n,t,u,e){return n.length?n+r(t,u,e)+t:t},"")}function _(n){if(dt(n))return at;var t=vt(n)?n:ct(n);return function(n){return function(r,u,e){var i=0;n(function(n){return r(t(n,i++,e.data))},u,e)}}}function D(){return y(function(n,t){return t>n?t:n})}function F(){return function(n){return function(t,r,u){var e=[];n(function(n){return e.push(n),!0},function(n){return dt(n)&&t(e),r(n)},u)}}}function R(){return function(n){return function(t,r,u){return F()(n)(function(n){n.length&&(n.sort(),t(n[nt(n.length/2)]))},r,u)}}}function B(){return y(function(n,t){return n>t?t:n})}function C(){return function(n){return function(t,r,u){return F()(n)(function(n){for(var r=n.length;r--;)t(n[r]);return!1},r,u)}}}function G(){return function(n){return function(t,r,u){return n(ft,r,u)}}}function U(n){return function(t){return function(r,u,e){var i=-1;t(function(t){return++i<n||r(t)},u,e)}}}function X(n){return function(t){return function(r,u,e){return F()(t)(function(t){for(var e=rt(t.length-n,0),i=-1;++i<e&&r(t[i]););u()},u,e)}}}function q(n){return function(t){return function(r,u,e){var i=0,o=!0;t(function(t){return o&&!n(t,i++,e.data)&&(o=!1),o||r(t)},u,e)}}}function z(n){switch(lt(n)){case Ln:return n>0?U(n):0>n?X(-n):at;case Jn:return q(n);default:return n?G():at}}function H(n){var t=void 0;switch(lt(n)){case Jn:t=n;break;case Wn:t=function(t){return n.test(t)};break;case Zn:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=!1;e=e.spawn(),n(function(n){return t(n)?(i=!0,!1):!0},function(n){return dt(n)&&r(i),u(n)},e)}}}function J(){return function(n){return k(function(n,t){return n+t},0)}}function K(n){return function(t){return function(r,u,e){var i=-1;t(function(t){return++i<n&&r(t)},u,e)}}}function L(n){return function(t){return function(r,u,e){return F()(t)(function(t){for(var e=t.length,i=rt(e-n-1,0);++i<e&&r(t[i]););u()},u,e)}}}function Q(n){return function(t){return function(r,u,e){var i=0;t(function(t){return n(t,i++,e.data)&&r(t)},u,e)}}}function V(n){switch(lt(n)){case Ln:return n>0?K(n):0>n?L(-n):i();case Jn:return Q(n);default:return n?at:i()}}function W(n){return function(t){return vt(n)?function(r,u,e){var i=0;t(function(t){return n(t,i++,e.data),r(t)},u,e)}:t}}function Y(){return function(n){return function(t,r,u){var e=$n();n(function(n){var r=$n(),u=t({timedelta:r-e,timestamp:$n,value:n});return e=r,u},r,u)}}}function Z(n,t){var r=dt(n)?at:vt(n)?n:ct(n),u=dt(t)?at:vt(t)?t:ct(t);return function(n){return function(t,e,i){var o=0,c=new Map;n(function(n){return c.set(r(n,o++,i.data),u(n,o++,i.data)),!0},function(n){return dt(n)&&t(c),e(n)},i)}}}function $(){return function(n){return function(t,r,u){var e=new Set;n(function(n){return e.add(n),!0},function(n){return dt(n)&&t(e),r(n)},u)}}}function nn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new mt(this.emitter,this.sources.concat(t))}function tn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new mt(this.emitter,t)}function rn(n){return new mt(n(this.emitter),this.sources)}function un(n){return this.chain(M(n))}function en(n){return this.chain(j(n))}function on(n,t){return this.chain(O(n,t))}function cn(n){return this.chain(E(n))}function an(n){return this.chain(I(n))}function fn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return this.chain(P(t))}function ln(n,t){return this.chain(T(n,t))}function sn(n){return this.chain(_(n))}function vn(){return this.chain(D())}function hn(){return this.chain(R())}function dn(){return this.chain(B())}function wn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new mt(this.emitter,t.concat(this.sources))}function bn(n,t,r){return this.chain(A(n,t,r))}function mn(){return this.chain(C())}function pn(n,t,r){vt(t)||(t=ft),vt(n)||(n=ft);var u=it({},{data:{value:r},flow:{value:this}});return setImmediate(function(){u.flow.emitter(function(t){return!1!==n(t,r)},function(n){return t(n,r)},u)}),this}function gn(n){return this.chain(z(n))}function yn(n){return this.chain(H(n))}function kn(){return this.chain(J())}function xn(n){return this.chain(V(n))}function An(n){return this.chain(W(n))}function Mn(){return this.chain(Y())}function jn(){return this.chain(F())}function Nn(n,t){return this.chain(Z(n,t))}function Sn(){return this.chain($())}function On(n){if(dt(n))return a(n);var t=lt(n);if(t===Un)return n.emitter;var r=gt[t];if(vt(r))return r(n);switch(t){case qn:case Ln:case Yn:return a(n);default:var u=n[Kn];return vt(u)?function(n,t,r){for(var e=u();r.active;){var i=e.next();if(i.done)break;n(i.value)}t()}:a(n)}}function En(n,t,r){var u=r.flow.sources,e=u.length,i=-1;!function o(c){dt(c)&&++i<e?On(u[i])(n,o,r):t(c)}()}function In(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new mt(En,t)}function Pn(n){return new mt(l(n))}function Tn(n,t){return new mt(s(n,t))}function _n(n){return new mt(a(n))}function Dn(n,t){return new mt(d(n,t))}function Fn(n,t,r){return new mt(w(n,t,r))}function Rn(n){return new mt(p(n))}function Bn(n){return new mt(g(n))}Object.defineProperty(t,"__esModule",{value:!0});var Cn,Gn,Un="Aeroflow",Xn="Array",qn="Boolean",zn=Symbol.toStringTag,Hn="Date",Jn="Function",Kn=Symbol.iterator,Ln="Number",Qn="Promise",Vn="prototype",Wn="RegExp",Yn="Symbol",Zn="Undefined",$n=Date.now,nt=Math.floor,tt=Math.random,rt=Math.max,ut=Number.MAX_SAFE_INTEGER,et=Object.create,it=Object.defineProperties,ot=Object.prototype.toString,ct=function(n){return function(){return n}},at=function(n){return n},ft=function(){},lt=function(n){return ot.call(n).slice(8,-1)},st=function(n){return function(t){return lt(t)===n}},vt=st(Jn),ht=Number.isInteger,dt=function(n){return null==n},wt=st(Ln),bt=function(n,t){return!wt(n)&&(n=+n,isNaN(n))?t:n},mt=function yt(n,t){u(this,yt),it(this,{emitter:{value:n},sources:{value:t}})},pt=et(Object[Vn],{count:{value:un,writable:!0},delay:{value:en,writable:!0},dump:{value:on,writable:!0},every:{value:cn,writable:!0},filter:{value:an,writable:!0},group:{value:fn,writable:!0},join:{value:ln,writable:!0},map:{value:sn,writable:!0},max:{value:vn,writable:!0},mean:{value:hn,writable:!0},min:{value:dn,writable:!0},reduce:{value:bn,writable:!0},reverse:{value:mn,writable:!0},skip:{value:gn,writable:!0},some:{value:yn,writable:!0},sum:{value:kn,writable:!0},take:{value:xn,writable:!0},tap:{value:An,writable:!0},timestamp:{value:Mn,writable:!0},toArray:{value:jn,writable:!0},toMap:{value:Nn,writable:!0},toSet:{value:Sn,writable:!0}});mt[Vn]=et(pt,(Cn={},r(Cn,zn,{value:Un}),r(Cn,"append",{value:nn}),r(Cn,"bind",{value:tn}),r(Cn,"chain",{value:rn}),r(Cn,"prepend",{value:wn}),r(Cn,"run",{value:pn}),Cn));var gt=et(null,(Gn={},r(Gn,Xn,{value:e,writable:!0}),r(Gn,qn,{value:a,writable:!0}),r(Gn,Hn,{value:a,writable:!0}),r(Gn,Jn,{value:o,writable:!0}),r(Gn,Ln,{value:a,writable:!0}),r(Gn,Qn,{value:c,writable:!0}),r(Gn,Wn,{value:a,writable:!0}),Gn));it(In,{adapters:{get:function(){return gt}},create:{value:Pn},empty:{enumerable:!0,value:new mt(i())},expand:{value:Tn},just:{value:_n},operators:{get:function(){return pt}},random:{value:Dn},range:{value:Fn},repeat:{value:Rn},timer:{value:Bn}}),t["default"]=In,n.exports=t["default"]});