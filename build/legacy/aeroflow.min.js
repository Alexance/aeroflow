!function(n,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var r={exports:{}};t(r,r.exports),n.aeroflow=r.exports}}(this,function(n,t){"use strict";function r(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function e(){return function(n,t){return t()}}function i(n,t,r){switch(n){case!0:return!1;case!1:return r(!1),!0}switch(Tt(n)){case lt:n.then(function(n){i(n,t,r)||t(!0)},function(n){return r(Qt(n))});break;case ot:r(n)}return!0}function o(n){return function(t,r){i(t(n),r,r)||r(!0)}}function c(n){return function(t,r,u){return n.emitter(t,r,new Vt(u.data,n))}}function f(n){return function(t,r,u){var e=-1;!function o(){for(;++e<n.length;)if(i(t(n[e]),o,r))return;r(!0)}()}}function a(n){return function(t,r,u){i(t(n(u.data)),r,r)||r(!0)}}function s(n){return function(t,r,u){return n.then(function(n){i(t(n),r,r)||r(!0)},function(n){return r(Qt(n))})}}function l(n){return function(t,r,u){var e=void 0,o=o=n[ft]();!function c(){for(;!(e=o.next()).done;)if(i(t(e.value),c,r))return;r(!0)}()}}function v(n,t){var r=Tt(n),u=Wt[r];return Rt(u)?u(n):!mt.has(r)&&ft in n?l(n):t?o(n):void 0}function h(n){return Ut(n)?e():Rt(n)?function(t,r,u){function e(n){f.push(n),c()}function o(n){a||(a=!0,Rt(s)&&setTimeout(s,0),Ut(n)&&(n=!0),r(n))}function c(){for(l=!1;f.length;)if(i(t(f.shift()),c,o))return void(l=!0)}var f=[],a=!1,s=void 0,l=!1;s=n(e,o,u)}:o(n)}function w(n){return function(t,r){return r(Ft(n)?n:new Error(n))}}function d(n,t){var r=Rt(n)?n:jt(n);return function(n,u,e){var o=0,c=t;!function f(){for(;!i(n(c=r(c,o++,e.data)),f,u););}()}}function b(n,t){t=Kt(t,1-yt(10,-15)),n=Kt(n,0),t-=n;var r=Bt(n)&&Bt(t)?pt:Ct;return function(u,e){!function o(){for(;!i(u(r(n+t*xt())),o,e););}()}}function m(n,t,r){if(t=Kt(t,Et),n=Kt(n,0),n===t)return o(n);var u=t>n;if(u){if(r=Kt(r,1),1>r)return o(n)}else if(r=Kt(r,-1),r>-1)return o(n);var e=u?function(n){return t>=n}:function(n){return n>=t};return function(t,u,o){var c=n-r;!function f(){for(;e(c+=r);)if(i(t(c),f,u))return;u(!0)}()}}function g(n,t){return function(r,u,e){var o=-1;!function c(f){setTimeout(function(){i(r(n(o,e.data)),c,u)||c()},Ht(t(++o,e.data),1e3))}()}}function p(n){return function(t,r,u){var e=0;!function o(){for(;!i(t(n(e++,u.data)),o,r););}()}}function y(n,t){var r=Jt(n,jt(n));return Dt(t)?g(r,Jt(t,jt(t))):p(r)}function x(n){return function(t){return function(r,u,e){var o=!0,c=1,f=void 0;t(function(t){return o?(o=!1,f=t):f=n(f,t,c++,e.data),!0},function(n){(Ft(n)||o||!i(r(f),Xt(u,n),u))&&u(n)},e)}}}function k(n,t){return function(r){return function(u,e,o){var c=0,f=t;r(function(t){return f=n(f,t,c++,o.data),!0},function(n){(Ft(n)||!i(u(f),Xt(e,n),e))&&e(n)},o)}}}function E(n,t){return function(r){return function(u,e,o){var c=!0,f=0,a=t;r(function(t){return c=!1,a=n(a,t,f++,o.data),!0},function(n){(Ft(n)||c||!i(u(a),Xt(e,n),e))&&e(n)},o)}}}function A(n,t,r){return Ut(n)?e:Rt(n)?Ut(t)?x(n):r?E(n,t):k(n,t):function(){return o(n)}}function P(){return x(function(n,t,r){return(n*r+t)/(r+1)})}function S(n){var t=Dt(n)?v(n,!0):function(n,t){return t(!1)};return function(n){return function(r,u,e){return n(r,function(n){return Ft(n)?t(r,u,e):u(n)},e)}}}function N(n){var t=n?E:k;return t(function(n){return n+1},0)}function M(n){var t=Jt(n,jt(n));return function(n){return function(r,u,e){var o=0;return n(function(n){return new Promise(function(u,c){setTimeout(function(){try{i(r(n),u,c)||u(!0)}catch(t){c(t)}},Ht(t(n,o++,e.data),1e3))})},u,e)}}}function j(n){return function(t){return n?function(n,r,u){var e=!0,i=void 0;t(function(t){return e||i!==t?(e=!1,i=t,n(t)):!0},r,u)}:function(n,r,u){var e=new Set;t(function(t){return e.has(t)?!0:(e.add(t),n(t))},r,u)}}}function C(n){return function(t){return function(r,u,e){return t(function(t){return console.log(n+"next",t),r(t)},function(t){console[Ft(t)?"error":"log"](n+"done",t),u(t)},e)}}}function O(n,t){return function(r){return function(u,e,i){return r(function(r){return t(n+"next",r),u(r)},function(r){t(n+"done",r),e(r)},i)}}}function T(n,t){return Rt(n)?O("",n):Rt(t)?O(n,t):C(Ut(n)?"":n)}function _(n){var t=void 0;switch(Tt(n)){case ct:t=n;break;case ht:t=function(t){return n.test(t)};break;case bt:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var o=!0,c=!0;n(function(n){return o=!1,t(n)?!0:(c=!1,!1)},function(n){(Ft(n)||!i(r(c||o),u,u))&&u(n)},e)}}}function I(n){var t=void 0;switch(Tt(n)){case ct:t=n;break;case ht:t=function(t){return n.test(t)};break;case bt:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=0;n(function(n){return!t(n,i++,e.data)||r(n)},u,e)}}}function D(n){return n=Kt(n,Et),1>n?Ct:function(t){return function(r,u,e){var i=0,o=function c(t){if(i===n)return r(t);var u=v(t,!1);return u?(i++,new Promise(function(n){return u(c,function(t){i--,n(t)},e)})):r(t)};t(o,u,e)}}}function F(n){n=n.length?n.map(function(n){return Rt(n)?n:jt(n)}):[jt()];var t=n.length-1;return function(r){return function(u,e,i){var o=new Map,c=0;r(function(r){for(var u=void 0,e=o,f=-1;++f<=t;){var a=n[f](r,c++,i.data);u=e.get(a),u||(u=f===t?[]:new Map,e.set(a,u)),e=u}return u.push(r),!0},function(n){Ft(n)?e(n):l(o)(u,Xt(e,n),i)},i)}}}function R(){return function(n){return function(t,r,u){var e=[];n(function(n){return e.push(n),!0},function(n){(Ft(n)||!i(t(e),Xt(r,n),r))&&r(n)},u)}}}function B(n){if(Ut(n))return Ct;var t=Rt(n)?n:jt(n);return function(n){return function(r,u,e){var i=0;n(function(n){return r(t(n,i++,e.data))},u,e)}}}function G(n,t){var r=Jt(t,zt),u=R()(v(n,!0));return function(n){return function(t,e,i){return u(function(u){return new Promise(function(e){return n(function(n){return new Promise(function(e){var o=f(u),c=I(function(t){return r(n,t)}),a=B(function(t){return[n,t]});return a(c(o))(t,e,i)})},e,i)})},e,i)}}}function L(){return x(function(n,t){return t>n?t:n})}function U(){return function(n){return function(t,r,u){return R()(n)(function(n){return n.length?(n.sort(),t(n[pt(n.length/2)])):!0},r,u)}}}function X(){return x(function(n,t){return n>t?t:n})}function q(n){return n=Kt(n,1),n?function(t){return function(r,u,e){function i(){t(r,o,e)}function o(t){++c<=n&&Ft(t)?i():u(t)}var c=0;i()}}:Ct}function z(){return function(n){return function(t,r,u){return R()(n)(function(n){return t(n.reverse())},r,u)}}}function H(){return function(n){return function(t,r,u){return n(zt,r,u)}}}function J(n){return function(t){return function(r,u,e){var i=-1;t(function(t){return++i<n||r(t)},u,e)}}}function K(n){return function(t){return function(r,u,e){return R()(t)(function(t){return t.length<=n||new Promise(function(u){var e=0,o=t.length-n;!function c(){for(;!i(r(t[e++]),c,u)&&o>e;);u(!0)}()})},u,e)}}}function Q(n){return function(t){return function(r,u,e){var i=0,o=!0;t(function(t){return o&&!n(t,i++,e.data)&&(o=!1),o||r(t)},u,e)}}}function V(n){switch(Tt(n)){case st:return n>0?J(n):0>n?K(-n):Ct;case ct:return Q(n);case bt:return H();default:return n?H():Ct}}function W(n,t){return n=Kt(n,0),t=Kt(t,Et),0>n||0>t?function(r){return function(u,e,o){return R()(r)(function(r){var e=r.length,o=0>n?e+n:n,c=0>t?e+t:kt(e,t);return 0>o&&(o=0),0>c&&(c=0),o>=c||new Promise(function(n){!function t(){for(;!i(u(r[o++]),t,n)&&c>o;);n(!0)}()})},e,o)}}:function(r){return function(u,e,i){var o=-1;r(function(r){return++o<n||t>o&&u(r)},e,i)}}}function Y(n){var t=void 0;switch(Tt(n)){case ct:t=n;break;case ht:t=function(t){return n.test(t)};break;case bt:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=!1;n(function(n){return t(n)?(i=!0,!1):!0},function(n){(Ft(n)||!unsync(r(i),u,u))&&u(n)},e)}}}function Z(n){for(var t=[],r=[],u=1,e=-1,i=n.length;++e<i;){var o=n[e];switch(Tt(o)){case ct:r.push(o),t.push(u);continue;case st:o=o>0?1:-1;break;case wt:o="desc"===o.toLowerCase()?-1:1;break;default:o=o?1:-1}t.length?t[t.length-1]=o:u=o}var c=r.length?function(n,u){for(var e=void 0,i=-1,o=r.length;++i<o;){var c=r[i];if(e=Mt(c(n),c(u),t[i]))break}return e}:function(n,t){return Mt(n,t,u)};return function(n){return function(t,r,u){return R()(n)(function(n){return new Promise(function(r){return f(n.sort(c))(t,r,u)})},r,u)}}}function $(){return x(function(n,t){return n+t})}function nn(n){return function(t){return function(r,u,e){var i=0;t(function(t){return++i<n?r(t):(t=r(t),It(t)?!1:Lt(t)?t.then(qt):t)},u,e)}}}function tn(n){return function(t){return function(r,u,e){return R()(t)(function(t){return!t.length||new Promise(function(u){var e=t.length,o=e-n;0>o&&(o=0),!function c(){for(;!i(r(t[o++]),c,u)&&e>o;);u(!0)}()})},u,e)}}}function rn(n){return function(t){return function(r,u,e){var i=0;t(function(t){return n(t,i++,e.data)&&r(t)},u,e)}}}function un(n){switch(Tt(n)){case st:return n>0?nn(n):0>n?tn(-n):e();case ct:return rn(n);default:return n?Ct:e()}}function en(n){return function(t){return Rt(n)?function(r,u,e){var i=0;t(function(t){return n(t,i++,e.data),r(t)},u,e)}:t}}function on(n,t){var r=Ut(n)?Ct:Rt(n)?n:jt(n),u=Ut(t)?Ct:Rt(t)?t:jt(t);return function(n){return function(t,e,o){var c=0,f=new Map;n(function(n){return f.set(r(n,c++,o.data),u(n,c++,o.data)),!0},function(n){(Ft(n)||!i(t(f),Xt(e,n),e))&&e(n)},o)}}}function cn(){return function(n){return function(t,r,u){var e=new Set;n(function(n){return e.add(n),!0},function(n){(Ft(n)||!i(t(e),Xt(r,n),r))&&r(n)},u)}}}function fn(n,t){var r=Ut(n)?jt(","):Rt(n)?n:jt(n),u=t?E:k;return u(function(n,t,u,e){return n.length?n+r(t,u,e)+t:""+t},"")}function an(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Yt(this.emitter,this.sources.concat(t))}function sn(){return this.chain(P())}function ln(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Yt(this.emitter,t)}function vn(n){return this.chain(S(n))}function hn(n){return new Yt(n(this.emitter),this.sources)}function wn(n){return this.chain(N(n))}function dn(n){return this.chain(M(n))}function bn(n){return this.chain(j(n))}function mn(n,t){return this.chain(T(n,t))}function gn(n){return this.chain(_(n))}function pn(n){return this.chain(I(n))}function yn(n){return this.chain(D(n))}function xn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return this.chain(F(t))}function kn(n,t){return this.chain(G(n,t))}function En(n){return this.chain(B(n))}function An(){return this.chain(L())}function Pn(){return this.chain(U())}function Sn(){return this.chain(X())}function Nn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Yt(this.emitter,t.concat(this.sources))}function Mn(n,t,r){return this.chain(A(n,t,r))}function jn(n){return this.chain(q(n))}function Cn(){return this.chain(z())}function On(n,t,r){Rt(n)?Rt(t)||(r=t,t=function(n){if(Ft(n))throw n}):mt.has(Tt(n))?(r=n,n=Ot,t=function(n){if(Ft(n))throw n}):Rt(n.dispatchEvent)?!function(){var u=n;r=t,t=function(n){return u.dispatchEvent(new CustomEvent("done",{detail:n})),!0},n=function(n){return u.dispatchEvent(new CustomEvent("next",{detail:n})),!0}}():Rt(n.emit)?!function(){var u=n;r=t,t=function(n){return u.emit("done",n),!0},n=function(n){return u.emit("next",n),!0}}():Rt(n.onNext)&&Rt(n.onError)&&Rt(n.onCompleted)&&!function(){var u=n;r=t,t=function(n){return(Ft(n)?u.onError:u.onCompleted)(n),!0},n=function(n){return u.onNext(n),!0}}();var u=new Vt(r,this);return setImmediate(function(){return u.flow.emitter(function(t){return!1!==n(t,r)},function(n){return t(n,r)},u)}),this}function Tn(n){return this.chain(V(n))}function _n(n,t){return this.chain(W(n,t))}function In(n){return this.chain(Y(n))}function Dn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return this.chain(Z(t))}function Fn(){return this.chain($())}function Rn(n){return this.chain(un(n))}function Bn(n){return this.chain(en(n))}function Gn(){return this.chain(R())}function Ln(n,t){return this.chain(on(n,t))}function Un(){return this.chain(cn())}function Xn(n,t){return this.chain(fn(n,t))}function qn(n,t,r){var u=r.flow.sources,e=u.length,i=-1;!function o(c){if(c!==!0||++i>=e)t(c);else try{v(u[i],!0)(n,o,r)}catch(f){t(f)}}(!0)}function zn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Yt(qn,t)}function Hn(n){return new Yt(h(n))}function Jn(n){return new Yt(w(n))}function Kn(n,t){return new Yt(d(n,t))}function Qn(n){return new Yt(o(n))}function Vn(n,t){return new Yt(b(n,t))}function Wn(n,t,r){return new Yt(m(n,t,r))}function Yn(n,t){return new Yt(y(n,t))}Object.defineProperty(t,"__esModule",{value:!0});var Zn,$n,nt="Aeroflow",tt="Array",rt="Boolean",ut=Symbol.toStringTag,et="Aeroflow.Context",it="Date",ot="Error",ct="Function",ft=Symbol.iterator,at="Null",st="Number",lt="Promise",vt="prototype",ht="RegExp",wt="String",dt="Symbol",bt="Undefined",mt=new Set([rt,it,ot,at,st,ht,wt,dt,bt]),gt=Date.now,pt=Math.floor,yt=Math.pow,xt=Math.random,kt=Math.min,Et=Number.MAX_SAFE_INTEGER,At=Object.create,Pt=Object.defineProperties,St=Object.defineProperty,Nt=Object.prototype.toString,Mt=function(n,t,r){return t>n?-r:n>t?r:0},jt=function(n){return function(){return n}},Ct=function(n){return n},Ot=function(){},Tt=function(n){return Nt.call(n).slice(8,-1)},_t=function(n){return function(t){return Tt(t)===n}},It=function(n){return n===!0||n===!1},Dt=function(n){return void 0!==n},Ft=_t(ot),Rt=function(n){return"function"==typeof n},Bt=Number.isInteger,Gt=_t(st),Lt=_t(lt),Ut=function(n){return void 0===n},Xt=function(n){for(var t=arguments.length,r=Array(t>1?t-1:0),u=1;t>u;u++)r[u-1]=arguments[u];return function(){return n.apply(void 0,r)}},qt=function(){return!1},zt=function(){return!0},Ht=function(n,t){switch(Tt(n)){case it:n-=gt();break;case st:break;default:n=+n}return isNaN(n)?t:0>n?0:n},Jt=function(n,t){return Rt(n)?n:t},Kt=function(n,t){return!Gt(n)&&(n=+n,isNaN(n))?t:n},Qt=function(n){return Ft(n)?n:new Error(n)},Vt=function $t(n,t){u(this,$t),Pt(this,{data:{value:n},flow:{value:t}})};St(Vt[vt],ut,{value:et});var Wt=At(null,(Zn={},r(Zn,nt,{value:c}),r(Zn,tt,{value:f,writable:!0}),r(Zn,ct,{value:a,writable:!0}),r(Zn,lt,{value:s,writable:!0}),Zn)),Yt=function nr(n,t){u(this,nr),Pt(this,{emitter:{value:n},sources:{value:t}})},Zt=At(Object[vt],{average:{value:sn,writable:!0},"catch":{value:vn,writable:!0},count:{value:wn,writable:!0},delay:{value:dn,writable:!0},distinct:{value:bn,writable:!0},dump:{value:mn,writable:!0},every:{value:gn,writable:!0},filter:{value:pn,writable:!0},flatten:{value:yn,writable:!0},group:{value:xn,writable:!0},join:{value:kn,writable:!0},map:{value:En,writable:!0},max:{value:An,writable:!0},mean:{value:Pn,writable:!0},min:{value:Sn,writable:!0},reduce:{value:Mn,writable:!0},retry:{value:jn,writable:!0},reverse:{value:Cn,writable:!0},skip:{value:Tn,writable:!0},slice:{value:_n,writable:!0},some:{value:In,writable:!0},sort:{value:Dn,writable:!0},sum:{value:Fn,writable:!0},take:{value:Rn,writable:!0},tap:{value:Bn,writable:!0},toArray:{value:Gn,writable:!0},toMap:{value:Ln,writable:!0},toSet:{value:Un,writable:!0},toString:{value:Xn,writable:!0}});Yt[vt]=At(Zt,($n={},r($n,ut,{value:nt}),r($n,"append",{value:an}),r($n,"bind",{value:ln}),r($n,"chain",{value:hn}),r($n,"prepend",{value:Nn}),r($n,"run",{value:On}),$n)),Pt(zn,{adapters:{get:function(){return Wt}},create:{value:Hn},empty:{enumerable:!0,value:new Yt(e())},error:{value:Jn},expand:{value:Kn},just:{value:Qn},operators:{get:function(){return Zt}},random:{value:Vn},range:{value:Wn},repeat:{value:Yn}}),t["default"]=zn,n.exports=t["default"]});