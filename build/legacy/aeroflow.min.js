!function(n,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var r={exports:{}};t(r,r.exports),n.aeroflow=r.exports}}(this,function(n,t){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function u(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function e(){return function(n,t){return t()}}function i(n){return function(t,r){t(n),r()}}function o(n){return function(t,r,u){var e=-1;!function i(u){if(gt(u))for(;++e<n.length&&(u=t(n[e]),pt(u)&&u.then(i,i),gt(u)););r(u)}(!0)}}function c(n){return function(t,r,u){try{return t(n(u.data)),r()}catch(e){return r(e)}}}function a(n){return function(t,r,u){return n.then(function(n){t(n),r()},r)}}function f(n){return function(t,r,u){var e=n[Ln](),i=void 0;try{do i=e.next();while(!i.done&&t(i.value));r()}catch(o){r(o)}}}function l(n,t){var r=vt(n);if(r===Xn)return n.emitter;var u=kt[r];return wt(u)?u(n):!At.has(r)&&Ln in n?f(n):t?i(n):void 0}function s(n){wt(n)&&n()}function v(n){return yt(n)?e():wt(n)?function(t,r,u){var e=!1,i=void 0;try{i=n(function(n){return e?!1:t(n)?!0:(e=!0,void r())},function(n){e||(e=!0,r(n))},u)}catch(o){if(e)throw s(i),o;e=!0,r()}s(i)}:i(n)}function h(n,t){var r=wt(n)?n:ft(n);return function(n,u,e){for(var i=0,o=t;n(r(o,i++,e.data)););u()}}function d(n,t){return function(r,u){for(;r(n+t*ut()););u()}}function w(n,t){return function(r,u){for(;r(rt(n+t*ut())););u()}}function b(n,t){return t=xt(t,1),n=xt(n,0),t-=n,bt(n)&&bt(t)?w(n,t):d(n,t)}function m(n,t,r){return t=xt(t,it),n=xt(n,0),n===t?i(n):t>n?(r=xt(r,1),1>r?i(n):function(u,e,i){for(var o=n;u(o)&&(o+=r)<=t;);e()}):(r=xt(r,-1),r>-1?i(n):function(u,e,i){for(var o=n;u(o)&&(o+=r)>=t;);e()})}function p(n){return function(t,r,u){var e=0;try{for(;t(n(e++,u.data)););r()}catch(i){r(i)}}}function g(n){return function(t,r,u){for(;t(n););r()}}function y(n){return isFunction(n)?p(n):g(n)}function x(n){return n=+n,isNaN(n)?e():function(t,r,u){var e=setInterval(function(){t(new Date)||(clearInterval(e),r())},n)}}function k(n){return function(t){return function(r,u,e){var i=!0,o=1,c=void 0;t(function(t){return i?(i=!1,c=t):c=n(c,t,o++,e.data),!0},function(n){return yt(n)&&!i&&r(c),u(n)},e)}}}function A(n,t){return function(r){return function(u,e,i){var o=0,c=t;r(function(t){return c=n(c,t,o++,i.data),!0},function(n){return yt(n)&&u(c),e(n)},i)}}}function M(n,t){return function(r){return function(u,e,i){var o=!0,c=0,a=t;r(function(t){return o=!1,a=n(a,t,c++,i.data),!0},function(n){return yt(n)&&!o&&u(a),e(n)},i)}}}function N(n,t,r){return yt(n)?e:wt(n)?yt(t)?k(n):r?M(n,t):A(n,t):function(){return i(n)}}function S(n){return(n?M:A)(function(n){return n+1},0)}function j(n){var t=wt(n)?n:ft(n);return function(n){return function(r,u,e){function i(n,r){if(a)return void o.push([n,r]);a=!0;var u=t(r,f++,e.data);switch(vt(u)){case Jn:u-=tt();break;case Vn:break;default:u=+u}0>u&&(u=0),setTimeout(function(){a=!1,n(r)?o.length&&i.apply(null,o.shift()):(c=!0,o.length=0)},u)}var o=[],c=!1,a=!1,f=0;return n(function(n){return c?!1:(i(r,n),!0)},function(n){c=!0,i(u,n)},e)}}}function O(n){return function(t){return function(r,u,e){return t(function(t){return console.log(n+"next",t),r(t)},function(t){return t?console.error(n+"done",t):console.log(n+"done"),u(t)},e)}}}function E(n,t){return function(r){return function(u,e,i){return r(function(r){return t(n+"next",r),u(r)},function(r){return r?t(n+"done",r):t(n+"done"),e(r)},i)}}}function I(n,t){return wt(n)?E("",n):wt(t)?E(n,t):O(yt(n)?"":n)}function P(n){var t=void 0;switch(vt(n)){case Kn:t=n;break;case Zn:t=function(t){return n.test(t)};break;case nt:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=!0,o=!0;n(function(n){return i=!1,t(n)?!0:o=!1},function(n){return yt(n)&&r(o&&!i),u(n)},e)}}}function T(n){var t=void 0;switch(vt(n)){case Kn:t=n;break;case Zn:t=function(t){return n.test(t)};break;case nt:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=0;n(function(n){return!t(n,i++,e.data)||r(n)},u,e)}}}function _(n){n=n.length?n.map(function(n){return wt(n)?n:ft(n)}):[ft()];var t=n.length-1;return function(r){return function(u,e,i){var o=new Map,c=0;r(function(r){for(var u=void 0,e=o,a=-1;++a<=t;){var f=n[a](r,c++,i.data);u=e.get(f),u||(u=a===t?[]:new Map,e.set(f,u)),e=u}return u.push(r),!0},function(n){n?e(n):(Array.from(o).every(u),e())},i)}}}function D(n,t){var r=wt(n)?n:ft(yt(n)?",":n);return(t?M:A)(function(n,t,u,e){return n.length?n+r(t,u,e)+t:t},"")}function F(n){if(yt(n))return lt;var t=wt(n)?n:ft(n);return function(n){return function(r,u,e){var i=0;n(function(n){return r(t(n,i++,e.data))},u,e)}}}function R(){return k(function(n,t){return t>n?t:n})}function B(){return function(n){return function(t,r,u){var e=[];n(function(n){return e.push(n),!0},function(n){return yt(n)&&t(e),r(n)},u)}}}function C(){return function(n){return function(t,r,u){return B()(n)(function(n){n.length&&(n.sort(),t(n[rt(n.length/2)]))},r,u)}}}function G(){return k(function(n,t){return n>t?t:n})}function U(){return function(n){return function(t,r,u){return B()(n)(function(n){for(var r=n.length;r--;)t(n[r]);return!1},r,u)}}}function X(){return function(n){return function(t,r,u){return n(st,r,u)}}}function q(n){return function(t){return function(r,u,e){var i=-1;t(function(t){return++i<n||r(t)},u,e)}}}function z(n){return function(t){return function(r,u,e){return B()(t)(function(t){for(var e=et(t.length-n,0),i=-1;++i<e&&r(t[i]););u()},u,e)}}}function H(n){return function(t){return function(r,u,e){var i=0,o=!0;t(function(t){return o&&!n(t,i++,e.data)&&(o=!1),o||r(t)},u,e)}}}function J(n){switch(vt(n)){case Vn:return n>0?q(n):0>n?z(-n):lt;case Kn:return H(n);case nt:return X();default:return n?X():lt}}function K(n){var t=void 0;switch(vt(n)){case Kn:t=n;break;case Zn:t=function(t){return n.test(t)};break;case nt:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=!1;n(function(n){return t(n)?(i=!0,!1):!0},function(n){return yt(n)&&r(i),u(n)},e)}}}function L(){return A(function(n,t){return n+t},0)}function Q(n){return function(t){return function(r,u,e){var i=-1;t(function(t){return++i<n&&r(t)},u,e)}}}function V(n){return function(t){return function(r,u,e){return B()(t)(function(t){for(var e=t.length,i=et(e-n-1,0);++i<e&&r(t[i]););u()},u,e)}}}function W(n){return function(t){return function(r,u,e){var i=0;t(function(t){return n(t,i++,e.data)&&r(t)},u,e)}}}function Y(n){switch(vt(n)){case Vn:return n>0?Q(n):0>n?V(-n):e();case Kn:return W(n);default:return n?lt:e()}}function Z(n){return function(t){return wt(n)?function(r,u,e){var i=0;t(function(t){return n(t,i++,e.data),r(t)},u,e)}:t}}function $(){return function(n){return function(t,r,u){var e=tt();n(function(n){var r=tt(),u=t({timedelta:r-e,timestamp:tt,value:n});return e=r,u},r,u)}}}function nn(n,t){var r=yt(n)?lt:wt(n)?n:ft(n),u=yt(t)?lt:wt(t)?t:ft(t);return function(n){return function(t,e,i){var o=0,c=new Map;n(function(n){return c.set(r(n,o++,i.data),u(n,o++,i.data)),!0},function(n){return yt(n)&&t(c),e(n)},i)}}}function tn(){return function(n){return function(t,r,u){var e=new Set;n(function(n){return e.add(n),!0},function(n){return yt(n)&&t(e),r(n)},u)}}}function rn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Mt(this.emitter,this.sources.concat(t))}function un(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Mt(this.emitter,t)}function en(n){return new Mt(n(this.emitter),this.sources)}function on(n){return this.chain(S(n))}function cn(n){return this.chain(j(n))}function an(n,t){return this.chain(I(n,t))}function fn(n){return this.chain(P(n))}function ln(n){return this.chain(T(n))}function sn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return this.chain(_(t))}function vn(n,t){return this.chain(D(n,t))}function hn(n){return this.chain(F(n))}function dn(){return this.chain(R())}function wn(){return this.chain(C())}function bn(){return this.chain(G())}function mn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Mt(this.emitter,t.concat(this.sources))}function pn(n,t,r){return this.chain(N(n,t,r))}function gn(){return this.chain(U())}function yn(n,t,r){wt(t)||(t=st),wt(n)||(n=st);var u=ct({},{data:{value:r},flow:{value:this}});return setImmediate(function(){u.flow.emitter(function(t){return!1!==n(t,r)},function(n){return t(n,r)},u)}),this}function xn(n){return this.chain(J(n))}function kn(n){return this.chain(K(n))}function An(){return this.chain(L())}function Mn(n){return this.chain(Y(n))}function Nn(n){return this.chain(Z(n))}function Sn(){return this.chain($())}function jn(){return this.chain(B())}function On(n,t){return this.chain(nn(n,t))}function En(){return this.chain(tn())}function In(n,t,r){var u=r.flow.sources,e=u.length,i=-1;!function o(c){dt(c)||++i>=e?t():l(u[i],!0)(n,o,r)}()}function Pn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Mt(In,t)}function Tn(n){return new Mt(v(n))}function _n(n,t){return new Mt(h(n,t))}function Dn(n){return new Mt(i(n))}function Fn(n,t){return new Mt(b(n,t))}function Rn(n,t,r){return new Mt(m(n,t,r))}function Bn(n){return new Mt(y(n))}function Cn(n){return new Mt(x(n))}Object.defineProperty(t,"__esModule",{value:!0});var Gn,Un,Xn="Aeroflow",qn="Array",zn="Boolean",Hn=Symbol.toStringTag,Jn="Date",Kn="Function",Ln=Symbol.iterator,Qn="Null",Vn="Number",Wn="Promise",Yn="prototype",Zn="RegExp",$n="Symbol",nt="Undefined",tt=Date.now,rt=Math.floor,ut=Math.random,et=Math.max,it=Number.MAX_SAFE_INTEGER,ot=Object.create,ct=Object.defineProperties,at=Object.prototype.toString,ft=function(n){return function(){return n}},lt=function(n){return n},st=function(){},vt=function(n){return at.call(n).slice(8,-1)},ht=function(n){return function(t){return vt(t)===n}},dt=function(n){return void 0!==n},wt=ht(Kn),bt=Number.isInteger,mt=ht(Vn),pt=ht(Wn),gt=function(n){return n===!0},yt=function(n){return void 0===n},xt=function(n,t){return!mt(n)&&(n=+n,isNaN(n))?t:n},kt=ot(null,(Gn={},u(Gn,qn,{value:o,writable:!0}),u(Gn,zn,{value:i,writable:!0}),u(Gn,Jn,{value:i,writable:!0}),u(Gn,Kn,{value:c,writable:!0}),u(Gn,Vn,{value:i,writable:!0}),u(Gn,Wn,{value:a,writable:!0}),u(Gn,Zn,{value:i,writable:!0}),Gn)),At=new Set([zn,Qn,Vn,$n,nt]),Mt=function St(n,t){r(this,St),ct(this,{emitter:{value:n},sources:{value:t}})},Nt=ot(Object[Yn],{count:{value:on,writable:!0},delay:{value:cn,writable:!0},dump:{value:an,writable:!0},every:{value:fn,writable:!0},filter:{value:ln,writable:!0},group:{value:sn,writable:!0},join:{value:vn,writable:!0},map:{value:hn,writable:!0},max:{value:dn,writable:!0},mean:{value:wn,writable:!0},min:{value:bn,writable:!0},reduce:{value:pn,writable:!0},reverse:{value:gn,writable:!0},skip:{value:xn,writable:!0},some:{value:kn,writable:!0},sum:{value:An,writable:!0},take:{value:Mn,writable:!0},tap:{value:Nn,writable:!0},timestamp:{value:Sn,writable:!0},toArray:{value:jn,writable:!0},toMap:{value:On,writable:!0},toSet:{value:En,writable:!0}});Mt[Yn]=ot(Nt,(Un={},u(Un,Hn,{value:Xn}),u(Un,"append",{value:rn}),u(Un,"bind",{value:un}),u(Un,"chain",{value:en}),u(Un,"prepend",{value:mn}),u(Un,"run",{value:yn}),Un)),ct(Pn,{adapters:{get:function(){return kt}},create:{value:Tn},empty:{enumerable:!0,value:new Mt(e())},expand:{value:_n},just:{value:Dn},operators:{get:function(){return Nt}},random:{value:Fn},range:{value:Rn},repeat:{value:Bn},timer:{value:Cn}}),t["default"]=Pn,n.exports=t["default"]});