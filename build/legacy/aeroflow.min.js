!function(n,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var e={exports:{}};t(e.exports),n.aeroflow=e.exports}}(this,function(n){"use strict";function t(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function r(n){return function(t,e,r){for(var u=-1;r.active&&++u<n.length;)t(n[u]);e()}}function u(){return function(n,t){return t()}}function i(n){return function(t,e){t(n),e()}}function o(n){return function(t){return function(e,r,u){var i=!0,o=1,a=void 0;t(function(t){i?(i=!1,a=t):a=n(a,t,o++,u.data)},function(n){i||e(a),r(n)},u)}}}function a(n,t){return function(e){return function(r,u,i){var o=0,a=t;e(function(t){return a=n(a,t,o++,i.data)},function(n){r(a),u(n)},i)}}}function c(n,t){return function(e){return function(r,u,i){var o=!0,a=0,c=t;e(function(t){o=!1,c=n(c,t,a++,i.data)},function(n){o||r(c),u(n)},i)}}}function f(n,t,e){var r=arguments.length;if(!r||!on(n))return function(){return u()};switch(r){case 1:return o(n);case 2:return a(n,t);default:return on(n)?e?c(n,t):a(n,t):function(){return i(n)}}}function l(){return function(n){return a(n,function(n){return n+1},0)}}function s(n){return arguments.length?on(n)?function(t,e,r){return r.track(n(function(n){r.active&&t()},function(n){r.active&&(e(),r.done())},r))}:i(n):u()}function v(n,t){return function(n){return function(e,r,u){var i=rn(),o=0;n(function(n){var r=t(n,o++,u.data),a=void 0;un(r)?(a=r,r-=rn()):a=rn()+r,a>i&&(i=a),setTimeout(function(){return resolve(e(n))},sn(r,0))},function(n){i-=rn(),setTimeout(function(){return resolve(r(n))},sn(i,0))},u)}}}function d(n,t){return function(n){return function(e,r,u){return n(function(n){return setTimeout(function(){return e(n)},t)},function(n){return setTimeout(function(){return r(n)},t)},u)}}}function h(n){return on(n)?v(n):un(n)?v(function(){return sn(n-new Date,0)}):d(sn(+n||0,0))}function g(n,t){return 0===arguments.length?dumpToConsoleEmitter(""):1===arguments.length?on(n)?dumpToLoggerEmitter("",n):dumpToConsoleEmitter(""):on(t)?cn(n)?dumpToLoggerEmitter("",t):dumpToLoggerEmitter(n,t):dumpToConsoleEmitter(n)}function m(n,t){return function(e,r,u){for(var i=0,o=t;u.active;)e(o=n(o,i++,u.data));r()}}function p(n){return function(t,e,r){return t(n(r.data))}}function b(n){return function(t,e,r){for(var u=n[Z](),i=void 0;r.active&&!(i=u.next()).done;)t(i.value);e()}}function w(n){return function(t,e,r){return n.then(function(n){return t(n)},function(n){return e(n)})}}function y(n,t){return function(e,r,u){for(;u.active;)e(n+t*ln());r()}}function T(n,t){return function(e,r,u){for(;u.active;)e(fn(n+t*ln()));r()}}function x(n,t){return n=+n||0,t=+t||1,t-=n,an(n)&&an(t)?T(n,t):y(n,t)}function j(n,t,e){return function(r,u,i){var o=n-e;if(t>n)for(;i.active&&(o+=e)<=t;)r(o);else for(;i.active&&(o+=e)>=t;)r(o);u()}}function k(n){return function(t,e,r){for(var u=0,i=void 0;r.active&&!1!==(i=n(u++,r.data));)t(i);e()}}function E(n){return function(t,e,r){for(;r.active;)t(n);e()}}function O(n){return isFunction(n)?k(n):E(n)}function S(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];return _.apply(void 0,[this].concat(t))}function P(n){return new wn(n(this[X]))}function A(){return this.chain(l())}function C(n){return this.chain(h(n))}function M(n,t){return g(n,t)}function D(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];return _.apply(void 0,t.concat([this]))}function L(n,t,e){return this.chain(f(n,t,e))}function F(n,t,e){on(t)||(t=vn),on(n)||(n=vn);var r=new bn(this,e),u=this[X];return setImmediate(function(){var e=0;u(function(t){return n(t,e++,r)},function(n){r.done(),t(n,e,r)},r)}),this}function I(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];switch(t.length){case 0:return u();case 1:var r=t[0],o=tn(r);if(o===R)return r[X];var a=Tn[o];return on(a)?a(r):r&&Z in r?b(r):i(r);default:return function(n,e,r){var u=-1,i=t.length,o=function a(){return r.active&&++u<i?I(t[u])(n,a,r):e()};o()}}}function _(){return new wn(I.apply(void 0,arguments))}function N(n){return new wn(s(n))}function q(n,t){return new wn(m(n,t))}function z(n){return new wn(z(n))}function B(n,t){return new wn(x(n,t))}function G(n,t,e){return new wn(j(n,t,e))}function H(n){return new wn(O(n))}Object.defineProperty(n,"__esModule",{value:!0});var J,K,Q=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),R="Aeroflow",U="Array",V=Symbol.toStringTag,W="Date",X=Symbol("emitter"),Y="Function",Z=Symbol.iterator,$="Promise",nn="prototype",tn=function(n){return Object.prototype.toString.call(n).slice(8,-1)},en=function(n){return function(t){return tn(t)===n}},rn=Date.now,un=en(W),on=en(Y),an=Number.isInteger,cn=function(n){return null==n},fn=Math.floor,ln=Math.random,sn=Math.max,vn=function(){},dn=Object.create,hn=Object.defineProperties,gn=Object.defineProperty,mn=Symbol("callbacks"),pn=Symbol("completed"),bn=function(){function n(r,u){var i;e(this,n),hn(this,(i={},t(i,mn,{value:[]}),t(i,"data",{value:u}),t(i,"flow",{value:r}),i))}return Q(n,[{key:"done",value:function(){if(this[pn])return!1;gn(this[pn],{value:!0});var n=this[mn];return n.forEach(function(n){return n()}),this[mn].length=0,!0}},{key:"spawn",value:function(){if(!this[pn]){var t=new n(this.flow,this.data);return this[mn].push(function(){return t.done()}),t}}},{key:"track",value:function(n){on(n)&&(this[pn]?n():this[mn].push(n))}},{key:"active",get:function(){return!this[pn]}}]),n}(),wn=function xn(n){e(this,xn),gn(this,X,{value:n})},yn=dn(null);wn[nn]=dn(yn,(J={},t(J,V,{value:R}),t(J,"append",{configurable:!0,value:S,writable:!0}),t(J,"chain",{value:P}),t(J,"count",{configurable:!0,value:A,writable:!0}),t(J,"dump",{configurable:!0,value:M,writable:!0}),t(J,"prepend",{configurable:!0,value:D,writable:!0}),t(J,"reduce",{configurable:!0,value:L,writable:!0}),t(J,"run",{value:F}),J));var Tn=dn(null,(K={},t(K,U,{configurable:!0,value:r,writable:!0}),t(K,Y,{configurable:!0,value:p,writable:!0}),t(K,$,{configurable:!0,value:w,writable:!0}),K));hn(_,{adapters:{get:function(){return Tn}},create:{value:N},empty:{value:new wn(u())},expand:{value:q},just:{value:z},operators:{get:function(){return yn}},random:{value:B},range:{value:G},repeat:{value:H}}),n.delay=C,n["default"]=_});