!function(n,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var r={exports:{}};t(r,r.exports),n.aeroflow=r.exports}}(this,function(n,t){"use strict";function r(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function e(){return function(n,t){return t()}}function i(n,t,r){switch(n){case!0:return!1;case!1:return r(!1),!0}switch(Mt(n)){case it:n.then(function(n){i(n,t,r)||t(!0)},function(n){return r(It(n))});break;case nt:r(n)}return!0}function o(n){return function(t,r){i(t(n),r,r)||r(!0)}}function c(n){return function(t,r,u){var e=-1;!function o(){for(;++e<n.length;)if(i(t(n[e]),o,r))return;r(!0)}()}}function f(n){return function(t,r,u){i(t(n(u.data)),r,r)||r(!0)}}function a(n){return function(t,r,u){return n.then(function(n){i(t(n),r,r)||r(!0)},function(n){return r(It(n))})}}function s(n){return function(t,r,u){return n.emitter(t,r,new Ft(u.data,n))}}function l(n){return function(t,r,u){var e=void 0,o=o=n[rt]();!function c(){for(;!(e=o.next()).done;)if(i(t(e.value),c,r))return;r(!0)}()}}function v(n,t){var r=Mt(n);if(r===Qn)return s(n);var u=Rt[r];return jt(u)?u(n):!lt.has(r)&&rt in n?l(n):t?o(n):void 0}function h(n){return Tt(n)?e():jt(n)?function(t,r,u){function e(n){f.push(n),c()}function o(n){a||(a=!0,jt(s)&&setTimeout(s,0),Tt(n)&&(n=!0),r(n))}function c(){for(l=!1;f.length;)if(i(t(f.shift()),c,o))return void(l=!0)}var f=[],a=!1,s=void 0,l=!1;s=n(e,o,u)}:o(n)}function d(n){return function(t,r){return r(Pt(n)?n:new Error(n))}}function w(n,t){var r=jt(n)?n:Et(n);return function(n,u,e){var o=0,c=t;!function f(){for(;!i(n(c=r(c,o++,e.data)),f,u););}()}}function m(n,t){t=Dt(t,1-dt(10,-15)),n=Dt(n,0),t-=n;var r=Ct(n)&&Ct(t)?ht:At;return function(u,e){!function o(){for(;!i(u(r(n+t*wt())),o,e););}()}}function b(n,t,r){if(t=Dt(t,bt),n=Dt(n,0),n===t)return o(n);var u=t>n;if(u){if(r=Dt(r,1),1>r)return o(n)}else if(r=Dt(r,-1),r>-1)return o(n);var e=u?function(n){return t>=n}:function(n){return n>=t};return function(t,u,o){var c=n-r;!function f(){for(;e(c+=r);)if(i(t(c),f,u))return;u(!0)}()}}function g(n){var t=jt(n)?n:Et(n);return function(n,r,u){var e=0;!function o(){for(;!i(n(t(e++,u.data)),o,r););}()}}function p(n){return jt(n)||(n=Et(n)),function(t,r,u){var e=0;!function o(u){setTimeout(function(){i(t(new Date),o,r)||o()},Dt(n(e++),1e3))}()}}function y(n){return function(t){return function(r,u,e){var o=!0,c=1,f=void 0;t(function(t){return o?(o=!1,f=t):f=n(f,t,c++,e.data),!0},function(n){(Pt(n)||o||!i(r(f),_t(u,n),u))&&u(n)},e)}}}function x(n,t){return function(r){return function(u,e,o){var c=0,f=t;r(function(t){return f=n(f,t,c++,o.data),!0},function(n){(Pt(n)||!i(u(f),_t(e,n),e))&&e(n)},o)}}}function k(n,t){return function(r){return function(u,e,o){var c=!0,f=0,a=t;r(function(t){return c=!1,a=n(a,t,f++,o.data),!0},function(n){(Pt(error)||c||!i(u(a),_t(e,n),e))&&e(n)},o)}}}function E(n,t,r){return Tt(n)?e:jt(n)?Tt(t)?y(n):r?k(n,t):x(n,t):function(){return o(n)}}function A(){var n=0;return x(function(t,r){return n++,(t*(n-1)+r)/n},0)}function S(n){var t=n?k:x;return t(function(n){return n+1},0)}function M(n){var t=jt(n)?n:Et(n);return function(n){return function(r,u,e){var o=0;return n(function(n){var u=t(n,o++,e.data);switch(Mt(u)){case $n:u-=vt();break;case et:break;case nt:return u;default:u=+u}return 0>u&&(u=0),new Promise(function(t,e){setTimeout(function(){try{i(r(n),t,e)||t(!0)}catch(u){e(u)}},u)})},u,e)}}}function N(n){return function(t){return function(r,u,e){return t(function(t){return console.log(n+"next",t),r(t)},function(t){console[Pt(t)?"error":"log"](n+"done",t),u(t)},e)}}}function P(n,t){return function(r){return function(u,e,i){return r(function(r){return t(n+"next",r),u(r)},function(r){t(n+"done",r),e(r)},i)}}}function j(n,t){return jt(n)?P("",n):jt(t)?P(n,t):N(Tt(n)?"":n)}function C(n){var t=void 0;switch(Mt(n)){case tt:t=n;break;case ct:t=function(t){return n.test(t)};break;case st:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var o=!0,c=!0;n(function(n){return o=!1,t(n)?!0:(c=!1,!1)},function(n){(Pt(n)||!i(r(c||o),u,u))&&u(n)},e)}}}function O(n){var t=void 0;switch(Mt(n)){case tt:t=n;break;case ct:t=function(t){return n.test(t)};break;case st:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=0;n(function(n){return!t(n,i++,e.data)||r(n)},u,e)}}}function T(n){return n=Dt(n,bt),1>n?At:function(t){return function(r,u,e){var i=0,o=function c(t){if(i===n)return r(t);var u=v(t,!1);return u?(i++,new Promise(function(n){return u(c,function(t){i--,n(t)},e)})):r(t)};t(o,u,e)}}}function _(n){n=n.length?n.map(function(n){return jt(n)?n:Et(n)}):[Et()];var t=n.length-1;return function(r){return function(u,e,i){var o=new Map,c=0;r(function(r){for(var u=void 0,e=o,f=-1;++f<=t;){var a=n[f](r,c++,i.data);u=e.get(a),u||(u=f===t?[]:new Map,e.set(a,u)),e=u}return u.push(r),!0},function(n){Pt(n)?e(n):l(o)(u,_t(e,n),i)},i)}}}function D(n){if(Tt(n))return At;var t=jt(n)?n:Et(n);return function(n){return function(r,u,e){var i=0;n(function(n){return r(t(n,i++,e.data))},u,e)}}}function I(){return y(function(n,t){return t>n?t:n})}function F(){return function(n){return function(t,r,u){var e=[];n(function(n){return e.push(n),!0},function(n){(Pt(n)||!i(t(e),_t(r,n),r))&&r(n)},u)}}}function R(){return function(n){return function(t,r,u){return F()(n)(function(n){return n.length?(n.sort(),t(n[ht(n.length/2)])):!0},r,u)}}}function B(){return y(function(n,t){return n>t?t:n})}function G(){return function(n){return function(t,r,u){return F()(n)(function(n){return t(n.reverse())},r,u)}}}function L(){return function(n){return function(t,r,u){return n(St,r,u)}}}function U(n){return function(t){return function(r,u,e){var i=-1;t(function(t){return++i<n||r(t)},u,e)}}}function X(n){return function(t){return function(r,u,e){var i=void 0;F()(t)(function(n){return i=n,!1},function(t){isError(t)?u(t):arrayEmitter(i.slice(mt(values.length-n,0)))(r,u,e)},e)}}}function q(n){return function(t){return function(r,u,e){var i=0,o=!0;t(function(t){return o&&!n(t,i++,e.data)&&(o=!1),o||r(t)},u,e)}}}function z(n){switch(Mt(n)){case et:return n>0?U(n):0>n?X(-n):At;case tt:return q(n);case st:return L();default:return n?L():At}}function H(n,t){return function(r){return function(u,e,i){var o=-1;r(function(r){return++o<n||t>=o&&u(r)},e,i)}}}function J(n,t){return function(r){return function(u,e,i){var o=void 0;F()(r)(function(n){return o=n,!1},function(r){Pt(r)?e(r):c(o.slice(n,t))(u,e,i)},i)}}}function K(n,t){return n=Dt(n,0),t=Dt(t,bt),0>n||0>t?J(n,t):H(n,t)}function Q(n){var t=void 0;switch(Mt(n)){case tt:t=n;break;case ct:t=function(t){return n.test(t)};break;case st:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=!1;n(function(n){return t(n)?(i=!0,!1):!0},function(n){(Pt(n)||!unsync(r(i),u,u))&&u(n)},e)}}}function V(n){for(var t=[],r=[],u=1,e=-1,i=n.length;++e<i;){var o=n[e];switch(Mt(o)){case tt:r.push(o),t.push(u);continue;case et:o=o>0?1:-1;break;case ft:o="desc"===o.toLowerCase()?-1:1;break;default:o=o?1:-1}t.length?t[t.length-1]=o:u=o}var f=r.length?function(n,u){for(var e=void 0,i=-1,o=r.length;++i<o;){var c=r[i];if(e=kt(c(n),c(u),t[i]))break}return e}:function(n,t){return kt(n,t,u)};return function(n){return function(t,r,u){return F()(n)(function(n){return new Promise(function(r){return c(n.sort(f))(t,r,u)})},r,u)}}}function W(){return x(function(n,t){return n+t},0)}function Y(n){return function(t){return function(r,u,e){var i=-1;t(function(t){return++i<n&&r(t)},u,e)}}}function Z(n){return function(t){return function(r,u,e){return F()(t)(function(t){return new Promise(function(u){return c(t.slice(mt(t.length-n,0)))(r,u,e)})},u,e)}}}function $(n){return function(t){return function(r,u,e){var i=0;t(function(t){return n(t,i++,e.data)&&r(t)},u,e)}}}function nn(n){switch(Mt(n)){case et:return n>0?Y(n):0>n?Z(-n):e();case tt:return $(n);default:return n?At:e()}}function tn(n){return function(t){return jt(n)?function(r,u,e){var i=0;t(function(t){return n(t,i++,e.data),r(t)},u,e)}:t}}function rn(n,t){var r=Tt(n)?At:jt(n)?n:Et(n),u=Tt(t)?At:jt(t)?t:Et(t);return function(n){return function(t,e,i){var o=0,c=new Map;n(function(n){return c.set(r(n,o++,i.data),u(n,o++,i.data)),!0},function(n){(Pt(n)||!desync(t(c),_t(e,n),e))&&e(n)},i)}}}function un(){return function(n){return function(t,r,u){var e=new Set;n(function(n){return e.add(n),!0},function(n){(Pt(n)||!i(t(e),_t(r,n),r))&&r(n)},u)}}}function en(n,t){var r=Tt(n)?Et(","):jt(n)?n:Et(n),u=t?k:x;return u(function(n,t,u,e){return n.length?n+r(t,u,e)+t:""+t},"")}function on(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Bt(this.emitter,this.sources.concat(t))}function cn(){return this.chain(A())}function fn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Bt(this.emitter,t)}function an(n){return new Bt(n(this.emitter),this.sources)}function sn(n){return this.chain(S(n))}function ln(n){return this.chain(M(n))}function vn(n,t){return this.chain(j(n,t))}function hn(n){return this.chain(C(n))}function dn(n){return this.chain(O(n))}function wn(n){return this.chain(T(n))}function mn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return this.chain(_(t))}function bn(n){return this.chain(D(n))}function gn(){return this.chain(I())}function pn(){return this.chain(R())}function yn(){return this.chain(B())}function xn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Bt(this.emitter,t.concat(this.sources))}function kn(n,t,r){return this.chain(E(n,t,r))}function En(){return this.chain(G())}function An(n,t,r){jt(n)?jt(t)||(t=function(n){if(Pt(n))throw n}):lt.has(Mt(n))?r=n:jt(n.dispatchEvent)?!function(){var u=n;r=t,t=function(n){return u.dispatchEvent(new CustomEvent("done",{detail:n})),!0},n=function(n){return u.dispatchEvent(new CustomEvent("next",{detail:n})),!0}}():jt(n.emit)?!function(){var u=n;r=t,t=function(n){return u.emit("done",n),!0},n=function(n){return u.emit("next",n),!0}}():jt(n.onNext)&&jt(n.onError)&&jt(n.onCompleted)&&!function(){var u=n;r=t,t=function(n){return(Pt(n)?u.onError:u.onCompleted)(n),!0},n=function(n){return u.onNext(n),!0}}();var u=new Ft(r,this);return setImmediate(function(){return u.flow.emitter(function(t){return!1!==n(t,r)},function(n){return t(n,r)},u)}),this}function Sn(n){return this.chain(z(n))}function Mn(n,t){return this.chain(K(n,t))}function Nn(n){return this.chain(Q(n))}function Pn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return this.chain(V(t))}function jn(){return this.chain(W())}function Cn(n){return this.chain(nn(n))}function On(n){return this.chain(tn(n))}function Tn(){return this.chain(F())}function _n(n,t){return this.chain(rn(n,t))}function Dn(){return this.chain(un())}function In(n,t){return this.chain(en(n,t))}function Fn(n,t,r){var u=r.flow.sources,e=u.length,i=-1;!function o(c){if(c!==!0||++i>=e)t(c);else try{v(u[i],!0)(n,o,r)}catch(f){t(f)}}(!0)}function Rn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Bt(Fn,t)}function Bn(n){return new Bt(h(n))}function Gn(n){return new Bt(d(n))}function Ln(n,t){return new Bt(w(n,t))}function Un(n){return new Bt(o(n))}function Xn(n,t){return new Bt(m(n,t))}function qn(n,t,r){return new Bt(b(n,t,r))}function zn(n){return new Bt(g(n))}function Hn(n){return new Bt(p(n))}Object.defineProperty(t,"__esModule",{value:!0});var Jn,Kn,Qn="Aeroflow",Vn="Array",Wn="Boolean",Yn=Symbol.toStringTag,Zn="Aeroflow.Context",$n="Date",nt="Error",tt="Function",rt=Symbol.iterator,ut="Null",et="Number",it="Promise",ot="prototype",ct="RegExp",ft="String",at="Symbol",st="Undefined",lt=new Set([Wn,$n,nt,ut,et,ct,ft,at,st]),vt=Date.now,ht=Math.floor,dt=Math.pow,wt=Math.random,mt=Math.max,bt=Number.MAX_SAFE_INTEGER,gt=Object.create,pt=Object.defineProperties,yt=Object.defineProperty,xt=Object.prototype.toString,kt=function(n,t,r){return t>n?-r:n>t?r:0},Et=function(n){return function(){return n}},At=function(n){return n},St=function(){},Mt=function(n){return xt.call(n).slice(8,-1)},Nt=function(n){return function(t){return Mt(t)===n}},Pt=Nt(nt),jt=Nt(tt),Ct=Number.isInteger,Ot=Nt(et),Tt=function(n){return void 0===n},_t=function(n){for(var t=arguments.length,r=Array(t>1?t-1:0),u=1;t>u;u++)r[u-1]=arguments[u];return function(){return n.apply(void 0,r)}},Dt=function(n,t){return!Ot(n)&&(n=+n,isNaN(n))?t:n},It=function(n){return Pt(n)?n:new Error(n)},Ft=function Lt(n,t){u(this,Lt),pt(this,{data:{value:n},flow:{value:t}})};yt(Ft[ot],Yn,{value:Zn});var Rt=gt(null,(Jn={},r(Jn,Vn,{value:c,writable:!0}),r(Jn,tt,{value:f,writable:!0}),r(Jn,it,{value:a,writable:!0}),Jn)),Bt=function Ut(n,t){u(this,Ut),pt(this,{emitter:{value:n},sources:{value:t}})},Gt=gt(Object[ot],{average:{value:cn,writable:!0},count:{value:sn,writable:!0},delay:{value:ln,writable:!0},dump:{value:vn,writable:!0},every:{value:hn,writable:!0},filter:{value:dn,writable:!0},flatten:{value:wn,writable:!0},group:{value:mn,writable:!0},map:{value:bn,writable:!0},max:{value:gn,writable:!0},mean:{value:pn,writable:!0},min:{value:yn,writable:!0},reduce:{value:kn,writable:!0},reverse:{value:En,writable:!0},skip:{value:Sn,writable:!0},slice:{value:Mn,writable:!0},some:{value:Nn,writable:!0},sort:{value:Pn,writable:!0},sum:{value:jn,writable:!0},take:{value:Cn,writable:!0},tap:{value:On,writable:!0},toArray:{value:Tn,writable:!0},toMap:{value:_n,writable:!0},toSet:{value:Dn,writable:!0},toString:{value:In,writable:!0}});Bt[ot]=gt(Gt,(Kn={},r(Kn,Yn,{value:Qn}),r(Kn,"append",{value:on}),r(Kn,"bind",{value:fn}),r(Kn,"chain",{value:an}),r(Kn,"prepend",{value:xn}),r(Kn,"run",{value:An}),Kn)),pt(Rn,{adapters:{get:function(){return Rt}},create:{value:Bn},empty:{enumerable:!0,value:new Bt(e())},error:{value:Gn},expand:{value:Ln},just:{value:Un},operators:{get:function(){return Gt}},random:{value:Xn},range:{value:qn},repeat:{value:zn},timer:{value:Hn}}),t["default"]=Rn,n.exports=t["default"]});