"use strict";!function(n,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var e={exports:{}};t(e,e.exports),n.aeroflow=e.exports}}(this,function(n,t){function e(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function u(n){var t=!0,e=[],r=function(n){return void 0!==n&&(n===!1?(t=!1,e.forEach(function(n){return n()})):z(n)&&(t?e.push(n):n())),t};return A(r,{data:{value:n},spawn:{value:function(){var t=u(n);return r(t),t}}})}function i(n){return q(n)?function(t,e){return n>e}:z(n)?n:function(){return!0}}function o(n){return z(n)?n:I}function a(n){return R(n)?X:z(n)?n:G(n)?function(t){return n.test(t)}:function(t){return t===n}}function f(n){throw _(n)?n:new Error(n)}function c(n){return T(n)?n:P(n)?d(n):z(n)?h(n):C(n)?y(n):F(n)?w(n):c.just(n)}function v(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];var r=[].concat(t);return new H(function(n,t,e){!function u(){r.length?c(r.shift())[j](n,u,e):t()}()})}function l(n){return z(n)?new H(function(t,e,r){var u=!1;n(function(n){r()&&t()},function(n){u||(u=!0,e(),r(!1))})}):J}function s(n,t,e){e=e||O;var r=z(n)?n:I;return new H(function(n,u,i){for(var o=e,a=0,f=t;0<o--&&i();)n(f=r(f,a++,i.data));u()})}function d(n){return new H(function(t,e,r){for(var u=-1;r()&&++u<n.length;)t(n[u]);e()})}function h(n){return new H(function(t,e,r){return c(n())[j](t,e,r)})}function w(n){return new H(function(t,e,r){for(var u=n[Symbol.iterator]();r();){var i=u.next();if(i.done)break;t(i.value)}e()})}function y(n){return new H(function(t,e,r){return n.then(function(n){return c(n)[j](t,e,r)},function(n){e(n),f(n)})})}function m(n){return new H(function(t,e){t(n),e()})}function p(n,t,e){return e=e||O,n=+n||0,t=+t||1,t-=n,new H(D(n)&&D(t)?function(r,u,i){for(var o=e;0<o--&&i();)r(S(n+t*Math.random()));u()}:function(r,u,i){for(var o=e;0<o--&&i();)r(n+t*Math.random());u()})}function k(n,t,e){return t=+t||O,n=+n||0,e=+e||(t>n?1:-1),n===t?m(n):new H(function(r,u,i){var o=n-e;if(t>n)for(;i()&&(o+=e)<=t;)r(o);else for(;i()&&(o+=e)>=t;)r(o);u()})}function b(n,t){return t=t||O,new H(z(n)?function(e,r,u){function i(n){n?(r(),f(n)):a&&u()?setImmediate(o):r()}function o(){if(0<a--){var t=u()&&n(u.data);t===!1?r():c(t)[j](e,i,u)}else r()}var a=t;o()}:function(e,r,u){for(var i=t;0<i--&&u();)e(n);r()})}Object.defineProperty(t,"__esModule",{value:!0});var g=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),x="Aeroflow",j=Symbol("emitter"),E=Object.classof,A=Object.defineProperties,S=Math.floor,M=Date.now,O=Number.MAX_SAFE_INTEGER,I=function(n){return n},T=function(n){return x===E(n)},P=function(n){return"Array"===E(n)},N=function(n){return"Date"===E(n)},_=function(n){return"Error"===E(n)},z=function(n){return"Function"===E(n)},D=Number.isInteger,F=function(n){return Object.isObject(n)&&Symbol.iterator in n},R=function(n){return null==n},q=function(n){return"Number"===E(n)},C=function(n){return"Promise"===E(n)},G=function(n){return"RegExp"===E(n)},X=function(n){return null!=n},B=function(){},H=function(){function n(t){var u;r(this,n),A(this,(u={},e(u,j,{value:t}),e(u,Symbol.toStringTag,{value:x}),u))}return g(n,[{key:"concat",value:function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];return v.apply(void 0,[this].concat(t))}},{key:"count",value:function(){return this.reduce(function(n){return n+1},0)}},{key:"delay",value:function(t){var e=this,r=z(t)?t:function(){return t};return new n(function(n,t,u){var i=M(),o=0;e[j](function(t){var e=r(t,o++,u.data),a=void 0;N(e)?(a=e,e-=M()):a=M()+e,a>i&&(i=a),0>e?setImmediate(function(){return n(t)}):setTimeout(function(){return n(t)},e)},function(n){i-=M(),0>i?setImmediate(function(){return t(n)}):setTimeout(function(){return t(n)},i)},u)})}},{key:"dump",value:function(t,e){var r=this;return z(t)?(e=t,t=""):(z(e)||(e=console.log.bind(console)),t=R(t)?"":t+" "),new n(function(n,u,i){return r[j](function(r){e(t+"next",r),n(r)},function(n){n?e(t+"done",n):e(t+"done"),u(n)},i)})}},{key:"every",value:function(t){var e=this,r=a(t);return new n(function(n,t,u){var i=!0,o=!0;u=u.spawn(),e[j](function(n){i=!1,r(n)||(o=!1,u(!1))},function(e){n(o&&!i),t(e)},u)})}},{key:"filter",value:function(t){var e=this,r=a(r);return new n(function(n,t,u){var i=0;e[j](function(t){return r(t,i++,u.data)?n(t):!1},t,u)})}},{key:"first",value:function(){var t=this;return new n(function(n,e,r){r=r.spawn(),t[j](function(t){n(t),r(!1)},e,r)})}},{key:"join",value:function(n){var t=R(n)?",":z(n)?n:""+n;return this.reduce(function(n,e){return n.length?n+t()+e:e},"")}},{key:"last",value:function(){var t=this;return new n(function(n,e,r){var u=!0,i=void 0;t[j](function(n){u=!1,i=n},function(t){u||n(i),e(t)},r)})}},{key:"map",value:function(t){var e=this;return t=o(t),new n(function(n,r,u){var i=0;e[j](function(e){return n(t(e,i++,u.data))},r,u)})}},{key:"max",value:function(){return this.reduce(function(n,t){return t>n?t:n})}},{key:"mean",value:function(){var t=this.toArray();return new n(function(n,e,r){return t[j](function(t){t.length&&(t.sort(),n(t[S(t.length/2)]))},e,r)})}},{key:"min",value:function(n){return this.reduce(function(n,t){return n>t?t:n})}},{key:"reduce",value:function(t,e){var r=this;return t=o(t),new n(function(n,u,i){var o=!0,a=0,f=void 0;X(e)&&(o=!1,f=e),r[j](function(n){o?(o=!1,a++,f=n):f=t(f,n,a++,i.data)},function(t){o||n(f),u(t)},i)})}},{key:"run",value:function(n,t,e){var r=this,i=u(e);return z(t)||(t=B),z(n)||(n=B),setImmediate(function(){return r[j](n,function(n){i(!1),n?t(n):t()},i)}),this}},{key:"share",value:function(t){var e=this,r=void 0,u=z(t)?t:q(t)?function(){return t}:function(){return O};return new n(function(n,t,i){return r?(r.forEach(n),void t()):(r=[],void e[j](function(t){r.push(t),n(t)},function(n){setTimeout(function(){r=null},u(i.data)),t(n)},i))})}},{key:"skip",value:function(t){var e=this;if(R(t))return new n(function(n,t,r){return e[j](function(n){},t,r)});var r=i(t);return new n(function(n,t,u){var i=0,o=!0;e[j](function(t){o&&!r(t,i++,u.data)&&(o=!1),o||n(t)},t,u)})}},{key:"some",value:function(t){var e=this;return t=a(t),new n(function(n,r,u){var i=!1;u=u.spawn(),e[j](function(n){t(n)&&(i=!0,u(!1))},function(t){n(i),r(t)},u)})}},{key:"sort",value:function(t){var e=this.toArray();return new n(function(n,r,u){return e[j](function(e){return e.length?e.sort(t).forEach(n):!1},r,u)})}},{key:"sum",value:function(){return this.reduce(function(n,t){return n+t},0)}},{key:"take",value:function(t){var e=this;if(R(t))return this;var r=i(t);return new n(function(n,t,u){var i=0;u=u.spawn(),e[j](function(t){return r(t,i++,u.data)?n(t):u(!1)},t,u)})}},{key:"tap",value:function(t){var e=this;return z(t)?new n(function(n,r,u){var i=0;e[j](function(e){t(e,i++,u.data),n(e)},r,u)}):this}},{key:"timedelta",value:function(){var t=this;return new n(function(n,e,r){var u=M();t[j](function(t){var e=M();n({timedelta:e-u,value:t}),u=e},e,r)})}},{key:"timestamp",value:function(){var t=this;return new n(function(n,e,r){return t[j](function(t){return n({timestamp:M(),value:t})},e,r)})}},{key:"toArray",value:function(t){var e=this;return t=o(t),new n(function(n,r,u){var i=0,o=[];e[j](function(n){return o.push(t(n,i++,u.data))},function(t){n(o),r(t)},u)})}},{key:"toSet",value:function(t){var e=this;return t=o(t),new n(function(n,r,u){var i=0,o=new Set;e[j](function(n){return o.add(t(n,i++,u.data))},function(t){n(o),r(t)},u)})}},{key:"toMap",value:function(t,e){var r=this;return t=z(t)?t:function(n){return P(n)&&2===n.length?n[0]:n},e=z(e)?e:function(n){return P(n)&&2===n.length?n[1]:n},new n(function(n,u,i){var o=0,a=new Map;r[j](function(n){return a.set(t(n,o,i.data),e(n,o++,i.data))},function(t){n(a),u(t)},i)})}},{key:"unique",value:function(){var t=this;return new n(function(n,e,r){var u=new Set;t[j](function(t){var e=u.size;u.add(t),e<u.size&&n(t)},e,r)})}}]),n}(),J=new H(function(n,t){return t()});t["default"]=A(c,{concat:{value:v},create:{value:l},empty:{value:J},expand:{value:s},just:{value:m},random:{value:p},range:{value:k},repeat:{value:b}}),n.exports=t["default"]});