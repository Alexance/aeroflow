!function(n,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var r={exports:{}};t(r,r.exports),n.aeroflow=r.exports}}(this,function(n,t){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function u(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function e(){return function(n,t){return t()}}function i(n,t,r){switch(n){case!0:return!1;case!1:return r(!1),!0}switch(bt(n)){case Yn:n.then(function(n){i(n,t,r)||t(!0)},function(n){return r(St(n))});break;case Jn:r(n)}return!0}function o(n){return function(t,r){i(t(n),r,r)||r(!0)}}function c(n){return function(t,r,u){var e=-1;!function o(){for(;++e<n.length;)if(i(t(n[e]),o,r))return;r(!0)}()}}function a(n){return function(t,r,u){try{i(t(n(u.data)),r,r)||r(!0)}catch(e){r(e)}}}function f(n){return function(t,r,u){return n.then(function(n){i(t(n),r,r)||r(!0)},function(n){return r(St(n))})}}function s(n){return function(t,r,u){var e=void 0,o=o=n[Qn]();!function c(){for(;!(e=o.next()).done;)if(i(t(e.value),c,r))return;r(!0)}()}}function l(n,t){var r=bt(n);if(r===Un)return n.emitter;var u=Mt[r];return pt(u)?u(n):!jt.has(r)&&Qn in n?s(n):t?o(n):void 0}function v(n){return xt(n)?e():pt(n)?function(t,r,u){function e(n){a.push(n),c()}function o(n){f||(f=!0,pt(s)&&setTimeout(s,0),xt(n)&&(n=!0),r(n))}function c(){for(l=!1;a.length;)if(i(t(a.shift()),c,o))return void(l=!0)}var a=[],f=!1,s=void 0,l=!1;s=n(e,o,u)}:o(n)}function h(n){return function(t,r){return r(gt(n)?n:new Error(n))}}function d(n,t){var r=pt(n)?n:ht(n);return function(n,u,e){var o=0,c=t;!function a(){for(;!i(n(r(c,o++,e.data))),u;);}()}}function w(n,t){t=At(t,1-it(10,-15)),n=At(n,0),t-=n;var r=yt(n)&&yt(t)?et:dt;return function(u,e){!function o(){for(;!i(u(r(n+t*ot())),o,e););}()}}function b(n,t,r){if(t=At(t,at),n=At(n,0),n===t)return o(n);var u=t>n;if(u){if(r=At(r,1),1>r)return o(n)}else if(r=At(r,-1),r>-1)return o(n);var e=u?function(n){return t>=n}:function(n){return n>=t};return function(t,u,o){var c=n-r;!function a(){for(;e(c+=r);)if(i(t(c),a,u))return;u(!0)}()}}function m(n){var t=pt(n)?n:ht(n);return function(n,r,u){var e=0;!function o(){for(;!i(n(t(e++,u.data)),o,r););}()}}function g(n){return pt(n)||(n=ht(n)),function(t,r,u){var e=0;!function o(u){setTimeout(function(){i(t(new Date),o,r)||o()},At(n(e++),1e3))}()}}function p(n){return function(t){return function(r,u,e){var o=!0,c=1,a=void 0;t(function(t){return o?(o=!1,a=t):a=n(a,t,c++,e.data),!0},function(n){(gt(n)||o||!i(r(a),Et(u,n),u))&&u(n)},e)}}}function y(n,t){return function(r){return function(u,e,o){var c=0,a=t;r(function(t){return a=n(a,t,c++,o.data),!0},function(n){(gt(n)||!i(u(a),Et(e,n),e))&&e(n)},o)}}}function k(n,t){return function(r){return function(u,e,o){var c=!0,a=0,f=t;r(function(t){return c=!1,f=n(f,t,a++,o.data),!0},function(n){(gt(error)||c||!i(u(f),Et(e,n),e))&&e(n)},o)}}}function x(n,t,r){return xt(n)?e:pt(n)?xt(t)?p(n):r?k(n,t):y(n,t):function(){return o(n)}}function E(n){var t=n?k:y;return t(function(n){return n+1},0)}function A(n){var t=pt(n)?n:ht(n);return function(n){return function(r,u,e){var o=0;return n(function(n){var u=t(n,o++,e.data);switch(bt(u)){case Hn:u-=ut();break;case Wn:break;default:u=+u}return 0>u&&(u=0),new Promise(function(t,e){setTimeout(function(){i(r(n),t,e)||t(!0)},u)})},u,e)}}}function S(n){return function(t){return function(r,u,e){return t(function(t){return console.log(n+"next",t),r(t)},function(t){console[gt(t)?"error":"log"](n+"done",t),u(t)},e)}}}function M(n,t){return function(r){return function(u,e,i){return r(function(r){return t(n+"next",r),u(r)},function(r){t(n+"done",r),e(r)},i)}}}function j(n,t){return pt(n)?M("",n):pt(t)?M(n,t):S(xt(n)?"":n)}function N(n){var t=void 0;switch(bt(n)){case Kn:t=n;break;case $n:t=function(t){return n.test(t)};break;case rt:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var o=!0,c=!0;n(function(n){return o=!1,t(n)?!0:(c=!1,!1)},function(n){(gt(n)||!i(r(c||o),u,u))&&u(n)},e)}}}function O(n){var t=void 0;switch(bt(n)){case Kn:t=n;break;case $n:t=function(t){return n.test(t)};break;case rt:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=0;n(function(n){return!t(n,i++,e.data)||r(n)},u,e)}}}function P(n){return n=At(n,at),1>n?dt:function(t){return function(r,u,e){var i=0,o=function c(t){if(i===n)return r(t);var u=l(t,!1);return u?(i++,new Promise(function(n){return u(c,function(t){i--,n(t)},e)})):r(t)};t(o,u,e)}}}function T(n){n=n.length?n.map(function(n){return pt(n)?n:ht(n)}):[ht()];var t=n.length-1;return function(r){return function(u,e,i){var o=new Map,c=0;r(function(r){for(var u=void 0,e=o,a=-1;++a<=t;){var f=n[a](r,c++,i.data);u=e.get(f),u||(u=a===t?[]:new Map,e.set(f,u)),e=u}return u.push(r),!0},function(n){gt(n)?e(n):s(o)(u,Et(e,n),i)},i)}}}function _(n){if(xt(n))return dt;var t=pt(n)?n:ht(n);return function(n){return function(r,u,e){var i=0;n(function(n){return r(t(n,i++,e.data))},u,e)}}}function D(){return p(function(n,t){return t>n?t:n})}function I(){return function(n){return function(t,r,u){var e=[];n(function(n){return e.push(n),!0},function(n){(gt(n)||!i(t(e),Et(r,n),r))&&r(n)},u)}}}function C(){return function(n){return function(t,r,u){return I()(n)(function(n){n.length&&(n.sort(),t(n[et(n.length/2)]))},r,u)}}}function F(){return p(function(n,t){return n>t?t:n})}function R(){return function(n){return function(t,r,u){return I()(n)(function(n){for(var r=n.length;r--;)t(n[r]);return!1},r,u)}}}function B(){return function(n){return function(t,r,u){return n(wt,r,u)}}}function G(n){return function(t){return function(r,u,e){var i=-1;t(function(t){return++i<n||r(t)},u,e)}}}function L(n){return function(t){return function(r,u,e){var i=void 0;I()(t)(function(n){return i=n,!1},function(t){isError(t)?u(t):arrayEmitter(i.slice(ct(values.length-n,0)))(r,u,e)},e)}}}function U(n){return function(t){return function(r,u,e){var i=0,o=!0;t(function(t){return o&&!n(t,i++,e.data)&&(o=!1),o||r(t)},u,e)}}}function X(n){switch(bt(n)){case Wn:return n>0?G(n):0>n?L(-n):dt;case Kn:return U(n);case rt:return B();default:return n?B():dt}}function q(n){var t=void 0;switch(bt(n)){case Kn:t=n;break;case $n:t=function(t){return n.test(t)};break;case rt:t=function(n){return!!n};break;default:t=function(t){return t===n}}return function(n){return function(r,u,e){var i=!1;n(function(n){return t(n)?(i=!0,!1):!0},function(n){(isError(n)||!unsync(r(i),u,u))&&u(n)},e)}}}function z(n){for(var t=[],r=[],u=1,e=-1,i=n.length;++e<i;){var o=n[e];switch(bt(o)){case Kn:r.push(o),t.push(u);continue;case Wn:o=o>0?1:-1;break;case nt:o="desc"===o.toLowerCase()?-1:1;break;default:o=o?1:-1}t.length?t[t.length-1]=o:u=o}var a=r.length?function(n,u){for(var e=void 0,i=-1,o=r.length;++i<o;){var c=r[i];if(e=vt(c(n),c(u),t[i]))break}return e}:function(n,t){return vt(n,t,u)};return function(n){return function(t,r,u){var e=void 0;I()(n)(function(n){return e=n,!0},function(n){gt(n)?r(n):(e.sort(a),c(e)(t,r,u))},u)}}}function H(){return y(function(n,t){return n+t},0)}function J(n){return function(t){return function(r,u,e){var i=-1;t(function(t){return++i<n&&r(t)},u,e)}}}function K(n){return function(n){return function(t,r,u){var e=void 0;I()(n)(function(n){return e=n,!1},function(n){isError(n)?r(n):arrayEmitter(e)(t,r,u)},u)}}}function Q(n){return function(t){return function(r,u,e){var i=0;t(function(t){return n(t,i++,e.data)&&r(t)},u,e)}}}function V(n){switch(bt(n)){case Wn:return n>0?J(n):0>n?K(-n):e();case Kn:return Q(n);default:return n?dt:e()}}function W(n){return function(t){return pt(n)?function(r,u,e){var i=0;t(function(t){return n(t,i++,e.data),r(t)},u,e)}:t}}function Y(n,t){var r=xt(n)?dt:pt(n)?n:ht(n),u=xt(t)?dt:pt(t)?t:ht(t);return function(n){return function(t,e,i){var o=0,c=new Map;n(function(n){return c.set(r(n,o++,i.data),u(n,o++,i.data)),!0},function(n){(gt(n)||!desync(t(c),Et(e,n),e))&&e(n)},i)}}}function Z(){return function(n){return function(t,r,u){var e=new Set;n(function(n){return e.add(n),!0},function(n){(gt(n)||!i(t(e),Et(r,n),r))&&r(n)},u)}}}function $(n,t){var r=xt(n)?ht(","):pt(n)?n:ht(n),u=t?k:y;return u(function(n,t,u,e){return n.length?n+r(t,u,e)+t:""+t},"")}function nn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Nt(this.emitter,this.sources.concat(t))}function tn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Nt(this.emitter,t)}function rn(n){return new Nt(n(this.emitter),this.sources)}function un(n){return this.chain(E(n))}function en(n){return this.chain(A(n))}function on(n,t){return this.chain(j(n,t))}function cn(n){return this.chain(N(n))}function an(n){return this.chain(O(n))}function fn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return this.chain(T(t))}function sn(n){return this.chain(P(n))}function ln(n){return this.chain(_(n))}function vn(){return this.chain(D())}function hn(){return this.chain(C())}function dn(){return this.chain(F())}function wn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Nt(this.emitter,t.concat(this.sources))}function bn(n,t,r){return this.chain(x(n,t,r))}function mn(){return this.chain(R())}function gn(n,t,r){pt(t)||(t=function(n){if(gt(n))throw n}),pt(n)||(n=wt);var u=st({},{data:{value:r},flow:{value:this}});return setImmediate(function(){try{u.flow.emitter(function(t){return!1!==n(t,r)},function(n){return t(n,r)},u)}catch(e){t(St(e),r)}}),this}function pn(n){return this.chain(X(n))}function yn(n){return this.chain(q(n))}function kn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return this.chain(z(t))}function xn(){return this.chain(H())}function En(n){return this.chain(V(n))}function An(n){return this.chain(W(n))}function Sn(){return this.chain(I())}function Mn(n,t){return this.chain(Y(n,t))}function jn(){return this.chain(Z())}function Nn(n,t){return this.chain($(n,t))}function On(n,t,r){var u=r.flow.sources,e=u.length,i=-1;!function o(c){c!==!0||++i>=e?t(c):l(u[i],!0)(n,o,r)}(!0)}function Pn(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Nt(On,t)}function Tn(n){return new Nt(v(n))}function _n(n){return new Nt(h(n))}function Dn(n,t){return new Nt(d(n,t))}function In(n){return new Nt(o(n))}function Cn(n,t){return new Nt(w(n,t))}function Fn(n,t,r){return new Nt(b(n,t,r))}function Rn(n){return new Nt(m(n))}function Bn(n){return new Nt(g(n))}Object.defineProperty(t,"__esModule",{value:!0});var Gn,Ln,Un="Aeroflow",Xn="Array",qn="Boolean",zn=Symbol.toStringTag,Hn="Date",Jn="Error",Kn="Function",Qn=Symbol.iterator,Vn="Null",Wn="Number",Yn="Promise",Zn="prototype",$n="RegExp",nt="String",tt="Symbol",rt="Undefined",ut=Date.now,et=Math.floor,it=Math.pow,ot=Math.random,ct=Math.max,at=Number.MAX_SAFE_INTEGER,ft=Object.create,st=Object.defineProperties,lt=Object.prototype.toString,vt=function(n,t,r){return t>n?-r:n>t?r:0},ht=function(n){return function(){return n}},dt=function(n){return n},wt=function(){},bt=function(n){return lt.call(n).slice(8,-1)},mt=function(n){return function(t){return bt(t)===n}},gt=mt(Jn),pt=mt(Kn),yt=Number.isInteger,kt=mt(Wn),xt=function(n){return void 0===n},Et=function(n){for(var t=arguments.length,r=Array(t>1?t-1:0),u=1;t>u;u++)r[u-1]=arguments[u];return function(){return n.apply(void 0,r)}},At=function(n,t){return!kt(n)&&(n=+n,isNaN(n))?t:n},St=function(n){return gt(n)?n:new Error(n)},Mt=ft(null,(Gn={},u(Gn,Xn,{value:c,writable:!0}),u(Gn,Kn,{value:a,writable:!0}),u(Gn,Yn,{value:f,writable:!0}),Gn)),jt=new Set([qn,Vn,Wn,nt,tt,rt]),Nt=function Pt(n,t){r(this,Pt),st(this,{emitter:{value:n},sources:{value:t}})},Ot=ft(Object[Zn],{count:{value:un,writable:!0},delay:{value:en,writable:!0},dump:{value:on,writable:!0},every:{value:cn,writable:!0},filter:{value:an,writable:!0},flatten:{value:sn,writable:!0},group:{value:fn,writable:!0},map:{value:ln,writable:!0},max:{value:vn,writable:!0},mean:{value:hn,writable:!0},min:{value:dn,writable:!0},reduce:{value:bn,writable:!0},reverse:{value:mn,writable:!0},skip:{value:pn,writable:!0},some:{value:yn,writable:!0},sort:{value:kn,writable:!0},sum:{value:xn,writable:!0},take:{value:En,writable:!0},tap:{value:An,writable:!0},toArray:{value:Sn,writable:!0},toMap:{value:Mn,writable:!0},toSet:{value:jn,writable:!0},toString:{value:Nn,writable:!0}});Nt[Zn]=ft(Ot,(Ln={},u(Ln,zn,{value:Un}),u(Ln,"append",{value:nn}),u(Ln,"bind",{value:tn}),u(Ln,"chain",{value:rn}),u(Ln,"prepend",{value:wn}),u(Ln,"run",{value:gn}),Ln)),st(Pn,{adapters:{get:function(){return Mt}},create:{value:Tn},empty:{enumerable:!0,value:new Nt(e())},error:{value:_n},expand:{value:Dn},just:{value:In},operators:{get:function(){return Ot}},random:{value:Cn},range:{value:Fn},repeat:{value:Rn},timer:{value:Bn}}),t["default"]=Pn,n.exports=t["default"]});